{
  "{\"sourceRoot\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend\",\"filename\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/index.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.9": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend",
      "filename": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/index.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/index.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.driver = void 0;\n\nvar _env = require(\"./env\");\n\nvar _db = require(\"./db\");\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _http = _interopRequireDefault(require(\"http\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _mongodb = require(\"mongodb\");\n\nvar _bcryptjs = require(\"bcryptjs\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst app = (0, _express.default)();\napp.use(_express.default.json());\n\nconst bodyParser = require(\"body-parser\");\n\napp.use(bodyParser.json());\napp.use(_express.default.static(_path.default.resolve(__dirname, \"../public\"))); // REQUISIÇÕES BÁSICAS\n\napp.post(\"/properties\", async (req, res) => {\n  console.log(\"O patrão ficou maluco\");\n  const filter = req.body;\n\n  if (filter) {\n    const properties = await (0, _db.getPropertiesWithFilter)(filter);\n    res.json(properties);\n  } else {\n    const properties = await (0, _db.getProperties)();\n    res.json(properties);\n  }\n}); // REQUISICOES PARA UM CORRETOR\n// requisição para aprovar login\n\napp.post(\"/login\", async (req, res) => {\n  const {\n    username,\n    password\n  } = req.body;\n\n  if (username && password) {\n    const l = await (0, _db.login)(username, password);\n\n    if (!l) {\n      res.json({\n        ok: false,\n        message: \"Usuário ou senha incorretos.\"\n      });\n    } else {\n      res.json({\n        ok: true,\n        data: {\n          username: l.username,\n          name: l.nome,\n          firstLogin: l.first_login\n        }\n      });\n    }\n  } else {\n    return res.json({\n      ok: false,\n      message: \"Problema ao efetuar login.\"\n    });\n  }\n}); // requisição para fazer troca de senha\n\napp.post(\"/reset\", async (req, res) => {\n  const {\n    username,\n    password\n  } = req.body;\n\n  if (username && password) {\n    const l = await (0, _db.reset)(username, password);\n    res.json({\n      ok: true\n    });\n  } else {\n    res.json({\n      ok: false,\n      message: \"Problema ao atualizar senha.\"\n    });\n  }\n}); // requisição para cadastrar imóvel\n\napp.post(\"/property\", async (req, res) => {\n  const {\n    nrInscricao,\n    titulo,\n    img,\n    endereco,\n    tipo,\n    nrDormitorios,\n    nrBanheiros,\n    nrVagas,\n    valor\n  } = req.body;\n\n  if (nrInscricao && img && titulo && endereco && tipo && nrDormitorios && nrBanheiros && nrVagas && valor) {\n    const p = await (0, _db.addProperty)(nrInscricao, titulo, img, endereco, tipo, nrDormitorios, nrBanheiros, nrVagas, valor);\n\n    if (p) {\n      res.json({\n        ok: true\n      });\n    } else {\n      res.json({\n        ok: false,\n        message: \"Já existe um imóvel com este número de inscrição.\"\n      });\n    }\n  } else {\n    res.json({\n      ok: false,\n      message: \"Problema ao inserir imóvel.\"\n    });\n  }\n}); // requisição para alterar situação de um imóvel\n\napp.post(\"/update\", async (req, res) => {\n  const {\n    nrInscricao,\n    situacao\n  } = req.body;\n\n  if (nrInscricao && situacao) {\n    const item = await (0, _db.updatePropertyState)(nrInscricao, situacao);\n    res.json(item);\n  } else {\n    res.json({\n      ok: false,\n      message: \"Problema ao atualizar imóvel.\"\n    });\n  }\n}); // REQUISICOES PARA UM INQUILINO\n// requisição para manifestar interesse em um imóvel\n\napp.post(\"/interest\", async (req, res) => {\n  const {\n    nome,\n    telefone,\n    nr_inscricao\n  } = req.body;\n\n  if (nr_inscricao && telefone && nome) {\n    const item = await (0, _db.addInterest)(nr_inscricao, nome, telefone);\n    res.json(item);\n  } else {\n    res.json({\n      ok: false,\n      message: \"Problema ao inscrever interesse.\"\n    });\n  }\n});\n\nconst server = _http.default.createServer(app);\n\nlet driver = new _mongodb.MongoClient(_env.MONGO_URL, {\n  useUnifiedTopology: true\n});\nexports.driver = driver;\ndriver.connect((err, conn) => {\n  if (err) {\n    console.log(err);\n  } else {\n    exports.driver = driver = conn.db(\"WEB_PROPERTY_RENTAL\");\n    console.log(\"Conexão com MongoDB estabelecida\");\n  }\n});\ndriver.once(\"open\", () => {\n  server.emit(\"ready\");\n});\nserver.on(\"ready\", () => {\n  server.listen(_env.PORT, () => console.log(`App disponível em http://localhost:${_env.PORT}`));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwcCIsInVzZSIsImV4cHJlc3MiLCJqc29uIiwiYm9keVBhcnNlciIsInJlcXVpcmUiLCJzdGF0aWMiLCJwYXRoIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsInBvc3QiLCJyZXEiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwiZmlsdGVyIiwiYm9keSIsInByb3BlcnRpZXMiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwibCIsIm9rIiwibWVzc2FnZSIsImRhdGEiLCJuYW1lIiwibm9tZSIsImZpcnN0TG9naW4iLCJmaXJzdF9sb2dpbiIsIm5ySW5zY3JpY2FvIiwidGl0dWxvIiwiaW1nIiwiZW5kZXJlY28iLCJ0aXBvIiwibnJEb3JtaXRvcmlvcyIsIm5yQmFuaGVpcm9zIiwibnJWYWdhcyIsInZhbG9yIiwicCIsInNpdHVhY2FvIiwiaXRlbSIsInRlbGVmb25lIiwibnJfaW5zY3JpY2FvIiwic2VydmVyIiwiaHR0cCIsImNyZWF0ZVNlcnZlciIsImRyaXZlciIsIk1vbmdvQ2xpZW50IiwiTU9OR09fVVJMIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiY29ubmVjdCIsImVyciIsImNvbm4iLCJkYiIsIm9uY2UiLCJlbWl0Iiwib24iLCJsaXN0ZW4iLCJQT1JUIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBVUE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxHQUFHLEdBQUcsdUJBQVo7QUFDQUEsR0FBRyxDQUFDQyxHQUFKLENBQVFDLGlCQUFRQyxJQUFSLEVBQVI7O0FBQ0EsTUFBTUMsVUFBVSxHQUFHQyxPQUFPLENBQUMsYUFBRCxDQUExQjs7QUFDQUwsR0FBRyxDQUFDQyxHQUFKLENBQVFHLFVBQVUsQ0FBQ0QsSUFBWCxFQUFSO0FBQ0FILEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxpQkFBUUksTUFBUixDQUFlQyxjQUFLQyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsV0FBeEIsQ0FBZixDQUFS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QVBEO0FBU0ErQixNQUFNLENBQUNRLElBQVAsQ0FBWSxNQUFaLEVBQW9CLE1BQU07QUFDeEJYLEVBQUFBLE1BQU0sQ0FBQ1ksSUFBUCxDQUFZLE9BQVo7QUFDRCxDQUZEO0FBSUFaLE1BQU0sQ0FBQ2EsRUFBUCxDQUFVLE9BQVYsRUFBbUIsTUFBTTtBQUN2QmIsRUFBQUEsTUFBTSxDQUFDYyxNQUFQLENBQWNDLFNBQWQsRUFBb0IsTUFDbEI1QyxPQUFPLENBQUNDLEdBQVIsQ0FBYSxzQ0FBcUMyQyxTQUFLLEVBQXZELENBREY7QUFHRCxDQUpEIiwic291cmNlUm9vdCI6Ii9ob21lL2dhcmNpYS9Eb2N1bWVudHMvVUZTQy9XZWIvdHJhYi1maW5hbC93ZWItcHJvcGVydHktcmVudGFsL2JhY2tlbmQvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBPUlQgfSBmcm9tIFwiLi9lbnZcIjtcbmltcG9ydCB7XG4gIGFkZFByb3BlcnR5LFxuICBjb25uZWN0LFxuICBnZXRQcm9wZXJ0aWVzLFxuICBnZXRQcm9wZXJ0aWVzV2l0aEZpbHRlcixcbiAgbG9naW4sXG4gIHJlc2V0LFxuICB1cGRhdGVQcm9wZXJ0eVN0YXRlLFxuICBhZGRJbnRlcmVzdCxcbn0gZnJvbSBcIi4vZGJcIjtcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgaHR0cCBmcm9tIFwiaHR0cFwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IE1PTkdPX1VSTCB9IGZyb20gXCIuL2VudlwiO1xuaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tIFwibW9uZ29kYlwiO1xuaW1wb3J0IHsgZ2VuU2FsdFN5bmMsIGhhc2hTeW5jLCBjb21wYXJlU3luYyB9IGZyb20gXCJiY3J5cHRqc1wiO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKFwiYm9keS1wYXJzZXJcIik7XG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuLi9wdWJsaWNcIikpKTtcblxuLy8gUkVRVUlTScOHw5VFUyBCw4FTSUNBU1xuYXBwLnBvc3QoXCIvcHJvcGVydGllc1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS5sb2coXCJPIHBhdHLDo28gZmljb3UgbWFsdWNvXCIpXG4gIGNvbnN0IGZpbHRlciA9IHJlcS5ib2R5O1xuICBpZiAoZmlsdGVyKSB7XG4gICAgY29uc3QgcHJvcGVydGllcyA9IGF3YWl0IGdldFByb3BlcnRpZXNXaXRoRmlsdGVyKGZpbHRlcik7XG4gICAgcmVzLmpzb24ocHJvcGVydGllcyk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcHJvcGVydGllcyA9IGF3YWl0IGdldFByb3BlcnRpZXMoKTtcbiAgICByZXMuanNvbihwcm9wZXJ0aWVzKTtcbiAgfVxufSk7XG5cbi8vIFJFUVVJU0lDT0VTIFBBUkEgVU0gQ09SUkVUT1Jcbi8vIHJlcXVpc2nDp8OjbyBwYXJhIGFwcm92YXIgbG9naW5cbmFwcC5wb3N0KFwiL2xvZ2luXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gIGlmICh1c2VybmFtZSAmJiBwYXNzd29yZCkge1xuICAgIGNvbnN0IGwgPSBhd2FpdCBsb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgIGlmICghbCkge1xuICAgICAgcmVzLmpzb24oeyBvazogZmFsc2UsIG1lc3NhZ2U6IFwiVXN1w6FyaW8gb3Ugc2VuaGEgaW5jb3JyZXRvcy5cIiB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgZGF0YTogeyB1c2VybmFtZTogbC51c2VybmFtZSwgbmFtZTogbC5ub21lLCBmaXJzdExvZ2luOiBsLmZpcnN0X2xvZ2luIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBcIlByb2JsZW1hIGFvIGVmZXR1YXIgbG9naW4uXCIgfSk7XG4gIH1cbn0pO1xuXG4vLyByZXF1aXNpw6fDo28gcGFyYSBmYXplciB0cm9jYSBkZSBzZW5oYVxuYXBwLnBvc3QoXCIvcmVzZXRcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcbiAgaWYgKHVzZXJuYW1lICYmIHBhc3N3b3JkKSB7XG4gICAgY29uc3QgbCA9IGF3YWl0IHJlc2V0KHVzZXJuYW1lLCBwYXNzd29yZCk7XG4gICAgcmVzLmpzb24oeyBvazogdHJ1ZSB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXMuanNvbih7IG9rOiBmYWxzZSwgbWVzc2FnZTogXCJQcm9ibGVtYSBhbyBhdHVhbGl6YXIgc2VuaGEuXCIgfSk7XG4gIH1cbn0pO1xuXG4vLyByZXF1aXNpw6fDo28gcGFyYSBjYWRhc3RyYXIgaW3Ds3ZlbFxuYXBwLnBvc3QoXCIvcHJvcGVydHlcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBuckluc2NyaWNhbyxcbiAgICB0aXR1bG8sXG4gICAgaW1nLFxuICAgIGVuZGVyZWNvLFxuICAgIHRpcG8sXG4gICAgbnJEb3JtaXRvcmlvcyxcbiAgICBuckJhbmhlaXJvcyxcbiAgICBuclZhZ2FzLFxuICAgIHZhbG9yLFxuICB9ID0gcmVxLmJvZHk7XG4gIGlmIChcbiAgICBuckluc2NyaWNhbyAmJlxuICAgIGltZyAmJlxuICAgIHRpdHVsbyAmJlxuICAgIGVuZGVyZWNvICYmXG4gICAgdGlwbyAmJlxuICAgIG5yRG9ybWl0b3Jpb3MgJiZcbiAgICBuckJhbmhlaXJvcyAmJlxuICAgIG5yVmFnYXMgJiZcbiAgICB2YWxvclxuICApIHtcbiAgICBjb25zdCBwID0gYXdhaXQgYWRkUHJvcGVydHkoXG4gICAgICBuckluc2NyaWNhbyxcbiAgICAgIHRpdHVsbyxcbiAgICAgIGltZyxcbiAgICAgIGVuZGVyZWNvLFxuICAgICAgdGlwbyxcbiAgICAgIG5yRG9ybWl0b3Jpb3MsXG4gICAgICBuckJhbmhlaXJvcyxcbiAgICAgIG5yVmFnYXMsXG4gICAgICB2YWxvclxuICAgICk7XG4gICAgaWYgKHApIHtcbiAgICAgIHJlcy5qc29uKHsgb2s6IHRydWUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBcIkrDoSBleGlzdGUgdW0gaW3Ds3ZlbCBjb20gZXN0ZSBuw7ptZXJvIGRlIGluc2NyacOnw6NvLlwiLFxuICAgICAgfSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcy5qc29uKHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBcIlByb2JsZW1hIGFvIGluc2VyaXIgaW3Ds3ZlbC5cIiB9KTtcbiAgfVxufSk7XG5cbi8vIHJlcXVpc2nDp8OjbyBwYXJhIGFsdGVyYXIgc2l0dWHDp8OjbyBkZSB1bSBpbcOzdmVsXG5hcHAucG9zdChcIi91cGRhdGVcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgbnJJbnNjcmljYW8sIHNpdHVhY2FvIH0gPSByZXEuYm9keTtcbiAgaWYgKG5ySW5zY3JpY2FvICYmIHNpdHVhY2FvKSB7XG4gICAgY29uc3QgaXRlbSA9IGF3YWl0IHVwZGF0ZVByb3BlcnR5U3RhdGUobnJJbnNjcmljYW8sIHNpdHVhY2FvKTtcbiAgICByZXMuanNvbihpdGVtKTtcbiAgfSBlbHNlIHtcbiAgICByZXMuanNvbih7IG9rOiBmYWxzZSwgbWVzc2FnZTogXCJQcm9ibGVtYSBhbyBhdHVhbGl6YXIgaW3Ds3ZlbC5cIiB9KTtcbiAgfVxufSk7XG5cbi8vIFJFUVVJU0lDT0VTIFBBUkEgVU0gSU5RVUlMSU5PXG4vLyByZXF1aXNpw6fDo28gcGFyYSBtYW5pZmVzdGFyIGludGVyZXNzZSBlbSB1bSBpbcOzdmVsXG5hcHAucG9zdChcIi9pbnRlcmVzdFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBub21lLCB0ZWxlZm9uZSwgbnJfaW5zY3JpY2FvIH0gPSByZXEuYm9keTtcbiAgaWYgKG5yX2luc2NyaWNhbyAmJiB0ZWxlZm9uZSAmJiBub21lKSB7XG4gICAgY29uc3QgaXRlbSA9IGF3YWl0IGFkZEludGVyZXN0KG5yX2luc2NyaWNhbywgbm9tZSwgdGVsZWZvbmUpO1xuICAgIHJlcy5qc29uKGl0ZW0pO1xuICB9IGVsc2Uge1xuICAgIHJlcy5qc29uKHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBcIlByb2JsZW1hIGFvIGluc2NyZXZlciBpbnRlcmVzc2UuXCIgfSk7XG4gIH1cbn0pO1xuXG5jb25zdCBzZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xubGV0IGRyaXZlciA9IG5ldyBNb25nb0NsaWVudChNT05HT19VUkwsIHsgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0pO1xuZHJpdmVyLmNvbm5lY3QoKGVyciwgY29ubikgPT4ge1xuICBpZiAoZXJyKSB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSBlbHNlIHtcbiAgICBkcml2ZXIgPSBjb25uLmRiKFwiV0VCX1BST1BFUlRZX1JFTlRBTFwiKTtcbiAgICBjb25zb2xlLmxvZyhcIkNvbmV4w6NvIGNvbSBNb25nb0RCIGVzdGFiZWxlY2lkYVwiKTtcbiAgfVxufSk7XG5cbmRyaXZlci5vbmNlKFwib3BlblwiLCAoKSA9PiB7XG4gIHNlcnZlci5lbWl0KFwicmVhZHlcIik7XG59KTtcblxuc2VydmVyLm9uKFwicmVhZHlcIiwgKCkgPT4ge1xuICBzZXJ2ZXIubGlzdGVuKFBPUlQsICgpID0+XG4gICAgY29uc29sZS5sb2coYEFwcCBkaXNwb27DrXZlbCBlbSBodHRwOi8vbG9jYWxob3N0OiR7UE9SVH1gKVxuICApO1xufSk7XG5cbmV4cG9ydCB7IGRyaXZlciB9O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "app",
        "use",
        "express",
        "json",
        "bodyParser",
        "require",
        "static",
        "path",
        "resolve",
        "__dirname",
        "post",
        "req",
        "res",
        "console",
        "log",
        "filter",
        "body",
        "properties",
        "username",
        "password",
        "l",
        "ok",
        "message",
        "data",
        "name",
        "nome",
        "firstLogin",
        "first_login",
        "nrInscricao",
        "titulo",
        "img",
        "endereco",
        "tipo",
        "nrDormitorios",
        "nrBanheiros",
        "nrVagas",
        "valor",
        "p",
        "situacao",
        "item",
        "telefone",
        "nr_inscricao",
        "server",
        "http",
        "createServer",
        "driver",
        "MongoClient",
        "MONGO_URL",
        "useUnifiedTopology",
        "connect",
        "err",
        "conn",
        "db",
        "once",
        "emit",
        "on",
        "listen",
        "PORT"
      ],
      "mappings": "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",
      "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
      "sourcesContent": [
        "import { PORT } from \"./env\";\nimport {\n  addProperty,\n  connect,\n  getProperties,\n  getPropertiesWithFilter,\n  login,\n  reset,\n  updatePropertyState,\n  addInterest,\n} from \"./db\";\nimport express from \"express\";\nimport http from \"http\";\nimport path from \"path\";\nimport { MONGO_URL } from \"./env\";\nimport { MongoClient } from \"mongodb\";\nimport { genSaltSync, hashSync, compareSync } from \"bcryptjs\";\n\nconst app = express();\napp.use(express.json());\nconst bodyParser = require(\"body-parser\");\napp.use(bodyParser.json());\napp.use(express.static(path.resolve(__dirname, \"../public\")));\n\n// REQUISIÇÕES BÁSICAS\napp.post(\"/properties\", async (req, res) => {\n  console.log(\"O patrão ficou maluco\")\n  const filter = req.body;\n  if (filter) {\n    const properties = await getPropertiesWithFilter(filter);\n    res.json(properties);\n  } else {\n    const properties = await getProperties();\n    res.json(properties);\n  }\n});\n\n// REQUISICOES PARA UM CORRETOR\n// requisição para aprovar login\napp.post(\"/login\", async (req, res) => {\n  const { username, password } = req.body;\n  if (username && password) {\n    const l = await login(username, password);\n    if (!l) {\n      res.json({ ok: false, message: \"Usuário ou senha incorretos.\" });\n    } else {\n      res.json({\n        ok: true,\n        data: { username: l.username, name: l.nome, firstLogin: l.first_login },\n      });\n    }\n  } else {\n    return res.json({ ok: false, message: \"Problema ao efetuar login.\" });\n  }\n});\n\n// requisição para fazer troca de senha\napp.post(\"/reset\", async (req, res) => {\n  const { username, password } = req.body;\n  if (username && password) {\n    const l = await reset(username, password);\n    res.json({ ok: true });\n  } else {\n    res.json({ ok: false, message: \"Problema ao atualizar senha.\" });\n  }\n});\n\n// requisição para cadastrar imóvel\napp.post(\"/property\", async (req, res) => {\n  const {\n    nrInscricao,\n    titulo,\n    img,\n    endereco,\n    tipo,\n    nrDormitorios,\n    nrBanheiros,\n    nrVagas,\n    valor,\n  } = req.body;\n  if (\n    nrInscricao &&\n    img &&\n    titulo &&\n    endereco &&\n    tipo &&\n    nrDormitorios &&\n    nrBanheiros &&\n    nrVagas &&\n    valor\n  ) {\n    const p = await addProperty(\n      nrInscricao,\n      titulo,\n      img,\n      endereco,\n      tipo,\n      nrDormitorios,\n      nrBanheiros,\n      nrVagas,\n      valor\n    );\n    if (p) {\n      res.json({ ok: true });\n    } else {\n      res.json({\n        ok: false,\n        message: \"Já existe um imóvel com este número de inscrição.\",\n      });\n    }\n  } else {\n    res.json({ ok: false, message: \"Problema ao inserir imóvel.\" });\n  }\n});\n\n// requisição para alterar situação de um imóvel\napp.post(\"/update\", async (req, res) => {\n  const { nrInscricao, situacao } = req.body;\n  if (nrInscricao && situacao) {\n    const item = await updatePropertyState(nrInscricao, situacao);\n    res.json(item);\n  } else {\n    res.json({ ok: false, message: \"Problema ao atualizar imóvel.\" });\n  }\n});\n\n// REQUISICOES PARA UM INQUILINO\n// requisição para manifestar interesse em um imóvel\napp.post(\"/interest\", async (req, res) => {\n  const { nome, telefone, nr_inscricao } = req.body;\n  if (nr_inscricao && telefone && nome) {\n    const item = await addInterest(nr_inscricao, nome, telefone);\n    res.json(item);\n  } else {\n    res.json({ ok: false, message: \"Problema ao inscrever interesse.\" });\n  }\n});\n\nconst server = http.createServer(app);\nlet driver = new MongoClient(MONGO_URL, { useUnifiedTopology: true });\ndriver.connect((err, conn) => {\n  if (err) {\n    console.log(err);\n  } else {\n    driver = conn.db(\"WEB_PROPERTY_RENTAL\");\n    console.log(\"Conexão com MongoDB estabelecida\");\n  }\n});\n\ndriver.once(\"open\", () => {\n  server.emit(\"ready\");\n});\n\nserver.on(\"ready\", () => {\n  server.listen(PORT, () =>\n    console.log(`App disponível em http://localhost:${PORT}`)\n  );\n});\n\nexport { driver };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1607660626219
  },
  "{\"sourceRoot\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend\",\"filename\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/env.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.9": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend",
      "filename": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/env.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/env.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/env.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
        "sourceFileName": "env.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MONGO_URL = exports.PORT = void 0;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-console */\nconst env = _path.default.join(__dirname, \"../.env\");\n\n_dotenv.default.config({\n  path: env\n});\n\nlet error = false;\n\nif (!process.env.PORT) {\n  console.log(\"Defina a variável PORT em backend/.env \\n\");\n  error = true;\n}\n\nif (!process.env.MONGO_URL) {\n  console.log(\"Defina a variável MONGO_URL em backend/.env\");\n  error = true;\n}\n\nerror && process.exit(1);\nconst PORT = parseInt(process.env.PORT);\nexports.PORT = PORT;\nconst MONGO_URL = process.env.MONGO_URL;\nexports.MONGO_URL = MONGO_URL;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudi5qcyJdLCJuYW1lcyI6WyJlbnYiLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsImRvdGVudiIsImNvbmZpZyIsImVycm9yIiwicHJvY2VzcyIsIlBPUlQiLCJjb25zb2xlIiwibG9nIiwiTU9OR09fVVJMIiwiZXhpdCIsInBhcnNlSW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7Ozs7QUFGQTtBQUlBLE1BQU1BLEdBQUcsR0FBR0MsY0FBS0MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFNBQXJCLENBQVo7O0FBQ0FDLGdCQUFPQyxNQUFQLENBQWM7QUFBRUosRUFBQUEsSUFBSSxFQUFFRDtBQUFSLENBQWQ7O0FBRUEsSUFBSU0sS0FBSyxHQUFHLEtBQVo7O0FBRUEsSUFBSSxDQUFDQyxPQUFPLENBQUNQLEdBQVIsQ0FBWVEsSUFBakIsRUFBdUI7QUFDckJDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDJDQUFaO0FBQ0FKLEVBQUFBLEtBQUssR0FBRyxJQUFSO0FBQ0Q7O0FBRUQsSUFBSSxDQUFDQyxPQUFPLENBQUNQLEdBQVIsQ0FBWVcsU0FBakIsRUFBNEI7QUFDMUJGLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDZDQUFaO0FBQ0FKLEVBQUFBLEtBQUssR0FBRyxJQUFSO0FBQ0Q7O0FBRURBLEtBQUssSUFBSUMsT0FBTyxDQUFDSyxJQUFSLENBQWEsQ0FBYixDQUFUO0FBRUEsTUFBTUosSUFBSSxHQUFHSyxRQUFRLENBQUNOLE9BQU8sQ0FBQ1AsR0FBUixDQUFZUSxJQUFiLENBQXJCOztBQUNBLE1BQU1HLFNBQVMsR0FBR0osT0FBTyxDQUFDUCxHQUFSLENBQVlXLFNBQTlCIiwic291cmNlUm9vdCI6Ii9ob21lL2dhcmNpYS9Eb2N1bWVudHMvVUZTQy9XZWIvdHJhYi1maW5hbC93ZWItcHJvcGVydHktcmVudGFsL2JhY2tlbmQvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcblxuY29uc3QgZW52ID0gcGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLi8uZW52XCIpO1xuZG90ZW52LmNvbmZpZyh7IHBhdGg6IGVudiB9KTtcblxubGV0IGVycm9yID0gZmFsc2U7XG5cbmlmICghcHJvY2Vzcy5lbnYuUE9SVCkge1xuICBjb25zb2xlLmxvZyhcIkRlZmluYSBhIHZhcmnDoXZlbCBQT1JUIGVtIGJhY2tlbmQvLmVudiBcXG5cIik7XG4gIGVycm9yID0gdHJ1ZTtcbn1cblxuaWYgKCFwcm9jZXNzLmVudi5NT05HT19VUkwpIHtcbiAgY29uc29sZS5sb2coXCJEZWZpbmEgYSB2YXJpw6F2ZWwgTU9OR09fVVJMIGVtIGJhY2tlbmQvLmVudlwiKTtcbiAgZXJyb3IgPSB0cnVlO1xufVxuXG5lcnJvciAmJiBwcm9jZXNzLmV4aXQoMSk7XG5cbmNvbnN0IFBPUlQgPSBwYXJzZUludChwcm9jZXNzLmVudi5QT1JUKTtcbmNvbnN0IE1PTkdPX1VSTCA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSTDtcbmV4cG9ydCB7IFBPUlQsIE1PTkdPX1VSTCB9O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "env.js"
      ],
      "names": [
        "env",
        "path",
        "join",
        "__dirname",
        "dotenv",
        "config",
        "error",
        "process",
        "PORT",
        "console",
        "log",
        "MONGO_URL",
        "exit",
        "parseInt"
      ],
      "mappings": ";;;;;;;AACA;;AACA;;;;AAFA;AAIA,MAAMA,GAAG,GAAGC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,SAArB,CAAZ;;AACAC,gBAAOC,MAAP,CAAc;AAAEJ,EAAAA,IAAI,EAAED;AAAR,CAAd;;AAEA,IAAIM,KAAK,GAAG,KAAZ;;AAEA,IAAI,CAACC,OAAO,CAACP,GAAR,CAAYQ,IAAjB,EAAuB;AACrBC,EAAAA,OAAO,CAACC,GAAR,CAAY,2CAAZ;AACAJ,EAAAA,KAAK,GAAG,IAAR;AACD;;AAED,IAAI,CAACC,OAAO,CAACP,GAAR,CAAYW,SAAjB,EAA4B;AAC1BF,EAAAA,OAAO,CAACC,GAAR,CAAY,6CAAZ;AACAJ,EAAAA,KAAK,GAAG,IAAR;AACD;;AAEDA,KAAK,IAAIC,OAAO,CAACK,IAAR,CAAa,CAAb,CAAT;AAEA,MAAMJ,IAAI,GAAGK,QAAQ,CAACN,OAAO,CAACP,GAAR,CAAYQ,IAAb,CAArB;;AACA,MAAMG,SAAS,GAAGJ,OAAO,CAACP,GAAR,CAAYW,SAA9B",
      "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
      "sourcesContent": [
        "/* eslint-disable no-console */\nimport path from \"path\";\nimport dotenv from \"dotenv\";\n\nconst env = path.join(__dirname, \"../.env\");\ndotenv.config({ path: env });\n\nlet error = false;\n\nif (!process.env.PORT) {\n  console.log(\"Defina a variável PORT em backend/.env \\n\");\n  error = true;\n}\n\nif (!process.env.MONGO_URL) {\n  console.log(\"Defina a variável MONGO_URL em backend/.env\");\n  error = true;\n}\n\nerror && process.exit(1);\n\nconst PORT = parseInt(process.env.PORT);\nconst MONGO_URL = process.env.MONGO_URL;\nexport { PORT, MONGO_URL };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1607198337720
  },
  "{\"sourceRoot\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend\",\"filename\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/db.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.9": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend",
      "filename": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/db.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/db.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/db.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
        "sourceFileName": "db.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.login = login;\nexports.reset = reset;\nexports.getProperties = getProperties;\nexports.getPropertyByInscricao = getPropertyByInscricao;\nexports.updatePropertyState = updatePropertyState;\nexports.addProperty = addProperty;\nexports.addInterest = addInterest;\nexports.getPropertiesWithFilter = getPropertiesWithFilter;\n\nvar _index = require(\"./index\");\n\nasync function login(username, password) {\n  const collection = _index.driver.collection(\"user\");\n\n  const query = {\n    username,\n    password\n  };\n  const user = await collection.findOne(query);\n  return user;\n}\n\nasync function reset(username, newPassword) {\n  const collection = _index.driver.collection(\"user\");\n\n  const query = {\n    username\n  };\n  const toUpdate = {\n    $set: {\n      password: newPassword\n    }\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  return updated;\n}\n\nasync function getProperties() {\n  const collection = _index.driver.collection(\"property\");\n\n  const properties = await collection.find().toArray();\n  return properties;\n}\n\nasync function getPropertyByInscricao(nr_inscricao) {\n  const collection = _index.driver.collection(\"property\");\n\n  const property = await collection.findOne({\n    nr_inscricao\n  });\n  return !!property;\n}\n\nasync function updatePropertyState(nr_inscricao, situacao) {\n  const collection = _index.driver.collection(\"property\");\n\n  const query = {\n    nr_inscricao: nr_inscricao\n  };\n  const toUpdate = {\n    $set: {\n      situacao\n    }\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  return updated;\n}\n\nasync function addProperty(nr_inscricao, titulo, img, endereco, tipo, nr_dormitorios, nr_banheiros, nr_vagas_garagem, valor) {\n  const collection = _index.driver.collection(\"property\");\n\n  let insert = null;\n\n  if (!!getProperty(nrInscricao)) {\n    insert = await collection.insertOne({\n      nr_inscricao,\n      titulo,\n      img,\n      endereco,\n      tipo,\n      nr_dormitorios: parseInt(nr_dormitorios),\n      nr_banheiros: parseInt(nr_banheiros),\n      nr_vagas_garagem: parseInt(nr_vagas_garagem),\n      valor: parseFloat(valor)\n    });\n  }\n\n  return insert;\n}\n\nasync function addInterest(nr_inscricao, nome, telefone) {\n  const property = await getPropertyByInscricao(nr_inscricao);\n\n  if (property) {\n    const collection = _index.driver.collection(\"interest\");\n\n    const length = await collection.find({\n      nome,\n      telefone\n    });\n\n    if (length > 3) {\n      return \"Você atingiu o número máximo de requisições de interesse.\";\n    } else {\n      const item = await collection.insertOne({\n        nr_inscricao,\n        nome,\n        telefone\n      });\n      return item;\n    }\n  } else {\n    return \"Este imóvel não existe.\";\n  }\n}\n\nasync function getPropertiesWithFilter(filter) {\n  const collection = _index.driver.collection(\"property\");\n\n  var query = {};\n\n  if (filter.tipoImovel) {\n    query.tipo = filter.tipoImovel;\n  }\n\n  if (filter.banheiros) {\n    _banheiros = parseInt(filter.nr_banheiros);\n\n    if (_banheiros >= 3) {\n      query.nr_banheiros = {\n        $gte: _banheiros\n      };\n    } else {\n      query.nr_banheiros = _banheiros;\n    }\n\n    ;\n  }\n\n  if (filter.quartos) {\n    _quartos = parseInt(filter.quartos);\n\n    if (_quartos >= 3) {\n      query.nr_dormitorios = {\n        $gte: _quartos\n      };\n    } else {\n      query.nr_dormitorios = _quartos;\n    }\n\n    ;\n  }\n\n  if (filter.garagem) {\n    _garagem = parseInt(filter.garagem);\n\n    if (_quartos >= 2) {\n      query.nr_vagas_garagem = {\n        $gte: _garagem\n      };\n    } else {\n      query.nr_vagas_garagem = _garagem;\n    }\n\n    ;\n  }\n\n  if (filter.precoMaximo && filter.precoMinimo) {\n    query.valor = {\n      $lte: parseFloat(filter.precoMaximo),\n      $gte: parseFloat(filter.precoMinimo)\n    };\n  } else {\n    if (filter.precoMaximo) {\n      query.valor = {\n        $lte: parseFloat(filter.precoMaximo)\n      };\n    } else if (filter.precoMinimo) {\n      query.valor = {\n        $gte: parseFloat(filter.precoMinimo)\n      };\n    }\n  }\n\n  const properties = await collection.find(query).toArray();\n  return properties;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiLmpzIl0sIm5hbWVzIjpbImxvZ2luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImNvbGxlY3Rpb24iLCJkcml2ZXIiLCJxdWVyeSIsInVzZXIiLCJmaW5kT25lIiwicmVzZXQiLCJuZXdQYXNzd29yZCIsInRvVXBkYXRlIiwiJHNldCIsInVwZGF0ZWQiLCJ1cGRhdGVPbmUiLCJnZXRQcm9wZXJ0aWVzIiwicHJvcGVydGllcyIsImZpbmQiLCJ0b0FycmF5IiwiZ2V0UHJvcGVydHlCeUluc2NyaWNhbyIsIm5yX2luc2NyaWNhbyIsInByb3BlcnR5IiwidXBkYXRlUHJvcGVydHlTdGF0ZSIsInNpdHVhY2FvIiwiYWRkUHJvcGVydHkiLCJ0aXR1bG8iLCJpbWciLCJlbmRlcmVjbyIsInRpcG8iLCJucl9kb3JtaXRvcmlvcyIsIm5yX2JhbmhlaXJvcyIsIm5yX3ZhZ2FzX2dhcmFnZW0iLCJ2YWxvciIsImluc2VydCIsImdldFByb3BlcnR5IiwibnJJbnNjcmljYW8iLCJpbnNlcnRPbmUiLCJwYXJzZUludCIsInBhcnNlRmxvYXQiLCJhZGRJbnRlcmVzdCIsIm5vbWUiLCJ0ZWxlZm9uZSIsImxlbmd0aCIsIml0ZW0iLCJnZXRQcm9wZXJ0aWVzV2l0aEZpbHRlciIsImZpbHRlciIsInRpcG9JbW92ZWwiLCJiYW5oZWlyb3MiLCJfYmFuaGVpcm9zIiwiJGd0ZSIsInF1YXJ0b3MiLCJfcXVhcnRvcyIsImdhcmFnZW0iLCJfZ2FyYWdlbSIsInByZWNvTWF4aW1vIiwicHJlY29NaW5pbW8iLCIkbHRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBOztBQUVPLGVBQWVBLEtBQWYsQ0FBcUJDLFFBQXJCLEVBQStCQyxRQUEvQixFQUF5QztBQUM5QyxRQUFNQyxVQUFVLEdBQUdDLGNBQU9ELFVBQVAsQ0FBa0IsTUFBbEIsQ0FBbkI7O0FBQ0EsUUFBTUUsS0FBSyxHQUFHO0FBQUVKLElBQUFBLFFBQUY7QUFBWUMsSUFBQUE7QUFBWixHQUFkO0FBQ0EsUUFBTUks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Q0FBQ08sTUFBTSxDQUFDUyxXQUFSO0FBQWxCLE9BQWQ7QUFDRCxLQUZELE1BRU8sSUFBSVQsTUFBTSxDQUFDVSxXQUFYLEVBQXdCO0FBQzdCakQsTUFBQUEsS0FBSyxDQUFDMEIsS0FBTixHQUFjO0FBQUVpQixRQUFBQSxJQUFJLEVBQUVYLFVBQVUsQ0FBQ08sTUFBTSxDQUFDVSxXQUFSO0FBQWxCLE9BQWQ7QUFDRDtBQUNGOztBQUNELFFBQU12QyxVQUFVLEdBQUcsTUFBTVosVUFBVSxDQUFDYSxJQUFYLENBQWdCWCxLQUFoQixFQUF1QlksT0FBdkIsRUFBekI7QUFDQSxTQUFPRixVQUFQO0FBQ0QiLCJzb3VyY2VSb290IjoiL2hvbWUvZ2FyY2lhL0RvY3VtZW50cy9VRlNDL1dlYi90cmFiLWZpbmFsL3dlYi1wcm9wZXJ0eS1yZW50YWwvYmFja2VuZC9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZHJpdmVyIH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICBjb25zdCBjb2xsZWN0aW9uID0gZHJpdmVyLmNvbGxlY3Rpb24oXCJ1c2VyXCIpO1xuICBjb25zdCBxdWVyeSA9IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH07XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUocXVlcnkpO1xuICByZXR1cm4gdXNlcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc2V0KHVzZXJuYW1lLCBuZXdQYXNzd29yZCkge1xuICBjb25zdCBjb2xsZWN0aW9uID0gZHJpdmVyLmNvbGxlY3Rpb24oXCJ1c2VyXCIpO1xuICBjb25zdCBxdWVyeSA9IHsgdXNlcm5hbWUgfTtcbiAgY29uc3QgdG9VcGRhdGUgPSB7XG4gICAgJHNldDogeyBwYXNzd29yZDogbmV3UGFzc3dvcmQgfSxcbiAgfTtcbiAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IGNvbGxlY3Rpb24udXBkYXRlT25lKHF1ZXJ5LCB0b1VwZGF0ZSk7XG4gIHJldHVybiB1cGRhdGVkO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvcGVydGllcygpIHtcbiAgY29uc3QgY29sbGVjdGlvbiA9IGRyaXZlci5jb2xsZWN0aW9uKFwicHJvcGVydHlcIik7XG4gIGNvbnN0IHByb3BlcnRpZXMgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmQoKS50b0FycmF5KCk7XG4gIHJldHVybiBwcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvcGVydHlCeUluc2NyaWNhbyhucl9pbnNjcmljYW8pIHtcbiAgY29uc3QgY29sbGVjdGlvbiA9IGRyaXZlci5jb2xsZWN0aW9uKFwicHJvcGVydHlcIik7XG4gIGNvbnN0IHByb3BlcnR5ID0gYXdhaXQgY29sbGVjdGlvbi5maW5kT25lKHsgbnJfaW5zY3JpY2FvIH0pO1xuICByZXR1cm4gISFwcm9wZXJ0eTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb3BlcnR5U3RhdGUobnJfaW5zY3JpY2FvLCBzaXR1YWNhbykge1xuICBjb25zdCBjb2xsZWN0aW9uID0gZHJpdmVyLmNvbGxlY3Rpb24oXCJwcm9wZXJ0eVwiKTtcbiAgY29uc3QgcXVlcnkgPSB7IG5yX2luc2NyaWNhbzogbnJfaW5zY3JpY2FvIH07XG4gIGNvbnN0IHRvVXBkYXRlID0ge1xuICAgICRzZXQ6IHsgc2l0dWFjYW8gfSxcbiAgfTtcbiAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IGNvbGxlY3Rpb24udXBkYXRlT25lKHF1ZXJ5LCB0b1VwZGF0ZSk7XG4gIHJldHVybiB1cGRhdGVkO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkUHJvcGVydHkoXG4gIG5yX2luc2NyaWNhbyxcbiAgdGl0dWxvLFxuICBpbWcsXG4gIGVuZGVyZWNvLFxuICB0aXBvLFxuICBucl9kb3JtaXRvcmlvcyxcbiAgbnJfYmFuaGVpcm9zLFxuICBucl92YWdhc19nYXJhZ2VtLFxuICB2YWxvclxuKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkcml2ZXIuY29sbGVjdGlvbihcInByb3BlcnR5XCIpO1xuICBsZXQgaW5zZXJ0ID0gbnVsbDtcbiAgaWYgKCEhZ2V0UHJvcGVydHkobnJJbnNjcmljYW8pKSB7XG4gICAgaW5zZXJ0ID0gYXdhaXQgY29sbGVjdGlvbi5pbnNlcnRPbmUoe1xuICAgICAgbnJfaW5zY3JpY2FvLFxuICAgICAgdGl0dWxvLFxuICAgICAgaW1nLFxuICAgICAgZW5kZXJlY28sXG4gICAgICB0aXBvLFxuICAgICAgbnJfZG9ybWl0b3Jpb3M6IHBhcnNlSW50KG5yX2Rvcm1pdG9yaW9zKSxcbiAgICAgIG5yX2JhbmhlaXJvczogcGFyc2VJbnQobnJfYmFuaGVpcm9zKSxcbiAgICAgIG5yX3ZhZ2FzX2dhcmFnZW06IHBhcnNlSW50KG5yX3ZhZ2FzX2dhcmFnZW0pLFxuICAgICAgdmFsb3I6IHBhcnNlRmxvYXQodmFsb3IpLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBpbnNlcnQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRJbnRlcmVzdChucl9pbnNjcmljYW8sIG5vbWUsIHRlbGVmb25lKSB7XG4gIGNvbnN0IHByb3BlcnR5ID0gYXdhaXQgZ2V0UHJvcGVydHlCeUluc2NyaWNhbyhucl9pbnNjcmljYW8pO1xuICBpZiAocHJvcGVydHkpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZHJpdmVyLmNvbGxlY3Rpb24oXCJpbnRlcmVzdFwiKTtcbiAgICBjb25zdCBsZW5ndGggPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmQoeyBub21lLCB0ZWxlZm9uZSB9KTtcbiAgICBpZiAobGVuZ3RoID4gMykge1xuICAgICAgcmV0dXJuIFwiVm9jw6ogYXRpbmdpdSBvIG7Dum1lcm8gbcOheGltbyBkZSByZXF1aXNpw6fDtWVzIGRlIGludGVyZXNzZS5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaXRlbSA9IGF3YWl0IGNvbGxlY3Rpb24uaW5zZXJ0T25lKHtcbiAgICAgICAgbnJfaW5zY3JpY2FvLFxuICAgICAgICBub21lLFxuICAgICAgICB0ZWxlZm9uZSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBcIkVzdGUgaW3Ds3ZlbCBuw6NvIGV4aXN0ZS5cIjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvcGVydGllc1dpdGhGaWx0ZXIoZmlsdGVyKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkcml2ZXIuY29sbGVjdGlvbihcInByb3BlcnR5XCIpO1xuXG4gIHZhciBxdWVyeSA9IHt9O1xuXG4gIGlmIChmaWx0ZXIudGlwb0ltb3ZlbCkge1xuICAgIHF1ZXJ5LnRpcG8gPSBmaWx0ZXIudGlwb0ltb3ZlbDtcbiAgfVxuXG4gIGlmIChmaWx0ZXIuYmFuaGVpcm9zKSB7XG4gICAgX2JhbmhlaXJvcyA9IHBhcnNlSW50KGZpbHRlci5ucl9iYW5oZWlyb3MpO1xuICAgIGlmIChfYmFuaGVpcm9zID49IDMpIHtcbiAgICAgIHF1ZXJ5Lm5yX2JhbmhlaXJvcyA9IHsgJGd0ZTogX2JhbmhlaXJvcyB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHF1ZXJ5Lm5yX2JhbmhlaXJvcyA9IF9iYW5oZWlyb3M7XG4gICAgfTtcbiAgfVxuXG4gIGlmIChmaWx0ZXIucXVhcnRvcykge1xuICAgIF9xdWFydG9zID0gcGFyc2VJbnQoZmlsdGVyLnF1YXJ0b3MpO1xuICAgIGlmIChfcXVhcnRvcyA+PSAzKSB7XG4gICAgICBxdWVyeS5ucl9kb3JtaXRvcmlvcyA9IHsgJGd0ZTogX3F1YXJ0b3MgfVxuICAgIH0gZWxzZSB7XG4gICAgICBxdWVyeS5ucl9kb3JtaXRvcmlvcyA9IF9xdWFydG9zO1xuICAgIH07XG4gIH1cblxuICBpZiAoZmlsdGVyLmdhcmFnZW0pIHtcbiAgICBfZ2FyYWdlbSA9IHBhcnNlSW50KGZpbHRlci5nYXJhZ2VtKTtcbiAgICBpZiAoX3F1YXJ0b3MgPj0gMikge1xuICAgICAgcXVlcnkubnJfdmFnYXNfZ2FyYWdlbSA9IHsgJGd0ZTogX2dhcmFnZW0gfVxuICAgIH0gZWxzZSB7XG4gICAgICBxdWVyeS5ucl92YWdhc19nYXJhZ2VtID0gX2dhcmFnZW07XG4gICAgfTtcbiAgfVxuXG4gIGlmIChmaWx0ZXIucHJlY29NYXhpbW8gJiYgZmlsdGVyLnByZWNvTWluaW1vKSB7XG4gICAgcXVlcnkudmFsb3IgPSB7XG4gICAgICAkbHRlOiBwYXJzZUZsb2F0KGZpbHRlci5wcmVjb01heGltbyksXG4gICAgICAkZ3RlOiBwYXJzZUZsb2F0KGZpbHRlci5wcmVjb01pbmltbyksXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoZmlsdGVyLnByZWNvTWF4aW1vKSB7XG4gICAgICBxdWVyeS52YWxvciA9IHsgJGx0ZTogcGFyc2VGbG9hdChmaWx0ZXIucHJlY29NYXhpbW8pIH07XG4gICAgfSBlbHNlIGlmIChmaWx0ZXIucHJlY29NaW5pbW8pIHtcbiAgICAgIHF1ZXJ5LnZhbG9yID0geyAkZ3RlOiBwYXJzZUZsb2F0KGZpbHRlci5wcmVjb01pbmltbykgfTtcbiAgICB9XG4gIH1cbiAgY29uc3QgcHJvcGVydGllcyA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZChxdWVyeSkudG9BcnJheSgpO1xuICByZXR1cm4gcHJvcGVydGllcztcbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "db.js"
      ],
      "names": [
        "login",
        "username",
        "password",
        "collection",
        "driver",
        "query",
        "user",
        "findOne",
        "reset",
        "newPassword",
        "toUpdate",
        "$set",
        "updated",
        "updateOne",
        "getProperties",
        "properties",
        "find",
        "toArray",
        "getPropertyByInscricao",
        "nr_inscricao",
        "property",
        "updatePropertyState",
        "situacao",
        "addProperty",
        "titulo",
        "img",
        "endereco",
        "tipo",
        "nr_dormitorios",
        "nr_banheiros",
        "nr_vagas_garagem",
        "valor",
        "insert",
        "getProperty",
        "nrInscricao",
        "insertOne",
        "parseInt",
        "parseFloat",
        "addInterest",
        "nome",
        "telefone",
        "length",
        "item",
        "getPropertiesWithFilter",
        "filter",
        "tipoImovel",
        "banheiros",
        "_banheiros",
        "$gte",
        "quartos",
        "_quartos",
        "garagem",
        "_garagem",
        "precoMaximo",
        "precoMinimo",
        "$lte"
      ],
      "mappings": "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",
      "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
      "sourcesContent": [
        "import { driver } from \"./index\";\n\nexport async function login(username, password) {\n  const collection = driver.collection(\"user\");\n  const query = { username, password };\n  const user = await collection.findOne(query);\n  return user;\n}\n\nexport async function reset(username, newPassword) {\n  const collection = driver.collection(\"user\");\n  const query = { username };\n  const toUpdate = {\n    $set: { password: newPassword },\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  return updated;\n}\n\nexport async function getProperties() {\n  const collection = driver.collection(\"property\");\n  const properties = await collection.find().toArray();\n  return properties;\n}\n\nexport async function getPropertyByInscricao(nr_inscricao) {\n  const collection = driver.collection(\"property\");\n  const property = await collection.findOne({ nr_inscricao });\n  return !!property;\n}\n\nexport async function updatePropertyState(nr_inscricao, situacao) {\n  const collection = driver.collection(\"property\");\n  const query = { nr_inscricao: nr_inscricao };\n  const toUpdate = {\n    $set: { situacao },\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  return updated;\n}\n\nexport async function addProperty(\n  nr_inscricao,\n  titulo,\n  img,\n  endereco,\n  tipo,\n  nr_dormitorios,\n  nr_banheiros,\n  nr_vagas_garagem,\n  valor\n) {\n  const collection = driver.collection(\"property\");\n  let insert = null;\n  if (!!getProperty(nrInscricao)) {\n    insert = await collection.insertOne({\n      nr_inscricao,\n      titulo,\n      img,\n      endereco,\n      tipo,\n      nr_dormitorios: parseInt(nr_dormitorios),\n      nr_banheiros: parseInt(nr_banheiros),\n      nr_vagas_garagem: parseInt(nr_vagas_garagem),\n      valor: parseFloat(valor),\n    });\n  }\n  return insert;\n}\n\nexport async function addInterest(nr_inscricao, nome, telefone) {\n  const property = await getPropertyByInscricao(nr_inscricao);\n  if (property) {\n    const collection = driver.collection(\"interest\");\n    const length = await collection.find({ nome, telefone });\n    if (length > 3) {\n      return \"Você atingiu o número máximo de requisições de interesse.\";\n    } else {\n      const item = await collection.insertOne({\n        nr_inscricao,\n        nome,\n        telefone,\n      });\n      return item;\n    }\n  } else {\n    return \"Este imóvel não existe.\";\n  }\n}\n\nexport async function getPropertiesWithFilter(filter) {\n  const collection = driver.collection(\"property\");\n\n  var query = {};\n\n  if (filter.tipoImovel) {\n    query.tipo = filter.tipoImovel;\n  }\n\n  if (filter.banheiros) {\n    _banheiros = parseInt(filter.nr_banheiros);\n    if (_banheiros >= 3) {\n      query.nr_banheiros = { $gte: _banheiros }\n    } else {\n      query.nr_banheiros = _banheiros;\n    };\n  }\n\n  if (filter.quartos) {\n    _quartos = parseInt(filter.quartos);\n    if (_quartos >= 3) {\n      query.nr_dormitorios = { $gte: _quartos }\n    } else {\n      query.nr_dormitorios = _quartos;\n    };\n  }\n\n  if (filter.garagem) {\n    _garagem = parseInt(filter.garagem);\n    if (_quartos >= 2) {\n      query.nr_vagas_garagem = { $gte: _garagem }\n    } else {\n      query.nr_vagas_garagem = _garagem;\n    };\n  }\n\n  if (filter.precoMaximo && filter.precoMinimo) {\n    query.valor = {\n      $lte: parseFloat(filter.precoMaximo),\n      $gte: parseFloat(filter.precoMinimo),\n    };\n  } else {\n    if (filter.precoMaximo) {\n      query.valor = { $lte: parseFloat(filter.precoMaximo) };\n    } else if (filter.precoMinimo) {\n      query.valor = { $gte: parseFloat(filter.precoMinimo) };\n    }\n  }\n  const properties = await collection.find(query).toArray();\n  return properties;\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1607656199724
  },
  "{\"sourceRoot\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend\",\"filename\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/env.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.9": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend",
      "filename": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/env.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/env.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/env.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
        "sourceFileName": "env.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MONGO_URL = exports.PORT = void 0;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-console */\nconst env = _path.default.join(__dirname, \"../.env\");\n\n_dotenv.default.config({\n  path: env\n});\n\nlet error = false;\n\nif (!process.env.PORT) {\n  console.log(\"Defina a variável PORT em backend/.env \\n\");\n  error = true;\n}\n\nif (!process.env.MONGO_URL) {\n  console.log(\"Defina a variável MONGO_URL em backend/.env\");\n  error = true;\n}\n\nerror && process.exit(1);\nconst PORT = parseInt(process.env.PORT);\nexports.PORT = PORT;\nconst MONGO_URL = process.env.MONGO_URL;\nexports.MONGO_URL = MONGO_URL;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudi5qcyJdLCJuYW1lcyI6WyJlbnYiLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsImRvdGVudiIsImNvbmZpZyIsImVycm9yIiwicHJvY2VzcyIsIlBPUlQiLCJjb25zb2xlIiwibG9nIiwiTU9OR09fVVJMIiwiZXhpdCIsInBhcnNlSW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7Ozs7QUFGQTtBQUlBLE1BQU1BLEdBQUcsR0FBR0MsY0FBS0MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFNBQXJCLENBQVo7O0FBQ0FDLGdCQUFPQyxNQUFQLENBQWM7QUFBRUosRUFBQUEsSUFBSSxFQUFFRDtBQUFSLENBQWQ7O0FBRUEsSUFBSU0sS0FBSyxHQUFHLEtBQVo7O0FBRUEsSUFBSSxDQUFDQyxPQUFPLENBQUNQLEdBQVIsQ0FBWVEsSUFBakIsRUFBdUI7QUFDckJDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDJDQUFaO0FBQ0FKLEVBQUFBLEtBQUssR0FBRyxJQUFSO0FBQ0Q7O0FBRUQsSUFBSSxDQUFDQyxPQUFPLENBQUNQLEdBQVIsQ0FBWVcsU0FBakIsRUFBNEI7QUFDMUJGLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDZDQUFaO0FBQ0FKLEVBQUFBLEtBQUssR0FBRyxJQUFSO0FBQ0Q7O0FBRURBLEtBQUssSUFBSUMsT0FBTyxDQUFDSyxJQUFSLENBQWEsQ0FBYixDQUFUO0FBRUEsTUFBTUosSUFBSSxHQUFHSyxRQUFRLENBQUNOLE9BQU8sQ0FBQ1AsR0FBUixDQUFZUSxJQUFiLENBQXJCOztBQUNBLE1BQU1HLFNBQVMsR0FBR0osT0FBTyxDQUFDUCxHQUFSLENBQVlXLFNBQTlCIiwic291cmNlUm9vdCI6Ii9ob21lL2dhcmNpYS9Eb2N1bWVudHMvVUZTQy9XZWIvdHJhYi1maW5hbC93ZWItcHJvcGVydHktcmVudGFsL2JhY2tlbmQvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcblxuY29uc3QgZW52ID0gcGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLi8uZW52XCIpO1xuZG90ZW52LmNvbmZpZyh7IHBhdGg6IGVudiB9KTtcblxubGV0IGVycm9yID0gZmFsc2U7XG5cbmlmICghcHJvY2Vzcy5lbnYuUE9SVCkge1xuICBjb25zb2xlLmxvZyhcIkRlZmluYSBhIHZhcmnDoXZlbCBQT1JUIGVtIGJhY2tlbmQvLmVudiBcXG5cIik7XG4gIGVycm9yID0gdHJ1ZTtcbn1cblxuaWYgKCFwcm9jZXNzLmVudi5NT05HT19VUkwpIHtcbiAgY29uc29sZS5sb2coXCJEZWZpbmEgYSB2YXJpw6F2ZWwgTU9OR09fVVJMIGVtIGJhY2tlbmQvLmVudlwiKTtcbiAgZXJyb3IgPSB0cnVlO1xufVxuXG5lcnJvciAmJiBwcm9jZXNzLmV4aXQoMSk7XG5cbmNvbnN0IFBPUlQgPSBwYXJzZUludChwcm9jZXNzLmVudi5QT1JUKTtcbmNvbnN0IE1PTkdPX1VSTCA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSTDtcbmV4cG9ydCB7IFBPUlQsIE1PTkdPX1VSTCB9O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "env.js"
      ],
      "names": [
        "env",
        "path",
        "join",
        "__dirname",
        "dotenv",
        "config",
        "error",
        "process",
        "PORT",
        "console",
        "log",
        "MONGO_URL",
        "exit",
        "parseInt"
      ],
      "mappings": ";;;;;;;AACA;;AACA;;;;AAFA;AAIA,MAAMA,GAAG,GAAGC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,SAArB,CAAZ;;AACAC,gBAAOC,MAAP,CAAc;AAAEJ,EAAAA,IAAI,EAAED;AAAR,CAAd;;AAEA,IAAIM,KAAK,GAAG,KAAZ;;AAEA,IAAI,CAACC,OAAO,CAACP,GAAR,CAAYQ,IAAjB,EAAuB;AACrBC,EAAAA,OAAO,CAACC,GAAR,CAAY,2CAAZ;AACAJ,EAAAA,KAAK,GAAG,IAAR;AACD;;AAED,IAAI,CAACC,OAAO,CAACP,GAAR,CAAYW,SAAjB,EAA4B;AAC1BF,EAAAA,OAAO,CAACC,GAAR,CAAY,6CAAZ;AACAJ,EAAAA,KAAK,GAAG,IAAR;AACD;;AAEDA,KAAK,IAAIC,OAAO,CAACK,IAAR,CAAa,CAAb,CAAT;AAEA,MAAMJ,IAAI,GAAGK,QAAQ,CAACN,OAAO,CAACP,GAAR,CAAYQ,IAAb,CAArB;;AACA,MAAMG,SAAS,GAAGJ,OAAO,CAACP,GAAR,CAAYW,SAA9B",
      "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
      "sourcesContent": [
        "/* eslint-disable no-console */\nimport path from \"path\";\nimport dotenv from \"dotenv\";\n\nconst env = path.join(__dirname, \"../.env\");\ndotenv.config({ path: env });\n\nlet error = false;\n\nif (!process.env.PORT) {\n  console.log(\"Defina a variável PORT em backend/.env \\n\");\n  error = true;\n}\n\nif (!process.env.MONGO_URL) {\n  console.log(\"Defina a variável MONGO_URL em backend/.env\");\n  error = true;\n}\n\nerror && process.exit(1);\n\nconst PORT = parseInt(process.env.PORT);\nconst MONGO_URL = process.env.MONGO_URL;\nexport { PORT, MONGO_URL };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1607198337720
  },
  "{\"sourceRoot\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend\",\"filename\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/db.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.9": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend",
      "filename": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/db.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/db.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/db.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
        "sourceFileName": "db.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.login = login;\nexports.reset = reset;\nexports.getProperties = getProperties;\nexports.getPropertyByInscricao = getPropertyByInscricao;\nexports.updatePropertyState = updatePropertyState;\nexports.addProperty = addProperty;\nexports.addInterest = addInterest;\nexports.getPropertiesWithFilter = getPropertiesWithFilter;\n\nvar _index = require(\"./index\");\n\nasync function login(username, password) {\n  const collection = _index.driver.collection(\"user\");\n\n  const query = {\n    username,\n    password\n  };\n  const user = await collection.findOne(query);\n  return user;\n}\n\nasync function reset(username, newPassword) {\n  const collection = _index.driver.collection(\"user\");\n\n  const query = {\n    username\n  };\n  const toUpdate = {\n    $set: {\n      password: newPassword\n    }\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  return updated;\n}\n\nasync function getProperties() {\n  const collection = _index.driver.collection(\"property\");\n\n  const properties = await collection.find().toArray();\n  return properties;\n}\n\nasync function getPropertyByInscricao(nr_inscricao) {\n  const collection = _index.driver.collection(\"property\");\n\n  const property = await collection.findOne({\n    nr_inscricao\n  });\n  return !!property;\n}\n\nasync function updatePropertyState(nr_inscricao, situacao) {\n  const collection = _index.driver.collection(\"property\");\n\n  const query = {\n    nr_inscricao: nr_inscricao\n  };\n  const toUpdate = {\n    $set: {\n      situacao\n    }\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  return updated;\n}\n\nasync function addProperty(nr_inscricao, titulo, img, endereco, tipo, nr_dormitorios, nr_banheiros, nr_vagas_garagem, valor) {\n  const collection = _index.driver.collection(\"property\");\n\n  let insert = null;\n\n  if (!!getProperty(nrInscricao)) {\n    insert = await collection.insertOne({\n      nr_inscricao,\n      titulo,\n      img,\n      endereco,\n      tipo,\n      nr_dormitorios: parseInt(nr_dormitorios),\n      nr_banheiros: parseInt(nr_banheiros),\n      nr_vagas_garagem: parseInt(nr_vagas_garagem),\n      valor: parseFloat(valor)\n    });\n  }\n\n  return insert;\n}\n\nasync function addInterest(nr_inscricao, nome, telefone) {\n  const property = await getPropertyByInscricao(nr_inscricao);\n\n  if (property) {\n    const collection = _index.driver.collection(\"interest\");\n\n    const length = await collection.find({\n      nome,\n      telefone\n    });\n\n    if (length > 3) {\n      return \"Você atingiu o número máximo de requisições de interesse.\";\n    } else {\n      const item = await collection.insertOne({\n        nr_inscricao,\n        nome,\n        telefone\n      });\n      return item;\n    }\n  } else {\n    return \"Este imóvel não existe.\";\n  }\n}\n\nasync function getPropertiesWithFilter(filter) {\n  const collection = _index.driver.collection(\"property\");\n\n  var query = {};\n\n  if (filter.tipoImovel) {\n    query.tipo = filter.tipoImovel;\n  }\n\n  if (filter.banheiros) {\n    const _banheiros = parseInt(filter.nr_banheiros);\n\n    if (_banheiros >= 3) {\n      query.nr_banheiros = {\n        $gte: _banheiros\n      };\n    } else {\n      query.nr_banheiros = _banheiros;\n    }\n\n    ;\n  }\n\n  if (filter.quartos) {\n    const _quartos = parseInt(filter.quartos);\n\n    if (_quartos >= 3) {\n      query.nr_dormitorios = {\n        $gte: _quartos\n      };\n    } else {\n      query.nr_dormitorios = _quartos;\n    }\n\n    ;\n  }\n\n  if (filter.garagem) {\n    const _garagem = parseInt(filter.garagem);\n\n    if (_garagem >= 2) {\n      query.nr_vagas_garagem = {\n        $gte: _garagem\n      };\n    } else {\n      query.nr_vagas_garagem = _garagem;\n    }\n\n    ;\n  }\n\n  if (filter.precoMaximo && filter.precoMinimo) {\n    query.valor = {\n      $lte: parseFloat(filter.precoMaximo),\n      $gte: parseFloat(filter.precoMinimo)\n    };\n  } else {\n    if (filter.precoMaximo) {\n      query.valor = {\n        $lte: parseFloat(filter.precoMaximo)\n      };\n    } else if (filter.precoMinimo) {\n      query.valor = {\n        $gte: parseFloat(filter.precoMinimo)\n      };\n    }\n  }\n\n  const properties = await collection.find(query).toArray();\n  return properties;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiLmpzIl0sIm5hbWVzIjpbImxvZ2luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImNvbGxlY3Rpb24iLCJkcml2ZXIiLCJxdWVyeSIsInVzZXIiLCJmaW5kT25lIiwicmVzZXQiLCJuZXdQYXNzd29yZCIsInRvVXBkYXRlIiwiJHNldCIsInVwZGF0ZWQiLCJ1cGRhdGVPbmUiLCJnZXRQcm9wZXJ0aWVzIiwicHJvcGVydGllcyIsImZpbmQiLCJ0b0FycmF5IiwiZ2V0UHJvcGVydHlCeUluc2NyaWNhbyIsIm5yX2luc2NyaWNhbyIsInByb3BlcnR5IiwidXBkYXRlUHJvcGVydHlTdGF0ZSIsInNpdHVhY2FvIiwiYWRkUHJvcGVydHkiLCJ0aXR1bG8iLCJpbWciLCJlbmRlcmVjbyIsInRpcG8iLCJucl9kb3JtaXRvcmlvcyIsIm5yX2JhbmhlaXJvcyIsIm5yX3ZhZ2FzX2dhcmFnZW0iLCJ2YWxvciIsImluc2VydCIsImdldFByb3BlcnR5IiwibnJJbnNjcmljYW8iLCJpbnNlcnRPbmUiLCJwYXJzZUludCIsInBhcnNlRmxvYXQiLCJhZGRJbnRlcmVzdCIsIm5vbWUiLCJ0ZWxlZm9uZSIsImxlbmd0aCIsIml0ZW0iLCJnZXRQcm9wZXJ0aWVzV2l0aEZpbHRlciIsImZpbHRlciIsInRpcG9JbW92ZWwiLCJiYW5oZWlyb3MiLCJfYmFuaGVpcm9zIiwiJGd0ZSIsInF1YXJ0b3MiLCJfcXVhcnRvcyIsImdhcmFnZW0iLCJfZ2FyYWdlbSIsInByZWNvTWF4aW1vIiwicHJlY29NaW5pbW8iLCIkbHRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBOztBQUVPLGVBQWVBLEtBQWYsQ0FBcUJDLFFBQXJCLEVBQStCQyxRQUEvQixFQUF5QztBQUM5QyxRQUFNQyxVQUFVLEdBQUdDLGNBQU9ELFVBQVAsQ0FBa0IsTUFBbEIsQ0FBbkI7O0FBQ0EsUUFBTUUsS0FBSyxHQUFHO0FBQUVKLElBQUFBLFFBQUY7QUFBWUMsSUFBQUE7QUFBWixHQUFkO0FBQ0EsUUFBTUks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Q08sTUFBTSxDQUFDUyxXQUFSO0FBQWxCLE9BQWQ7QUFDRCxLQUZELE1BRU8sSUFBSVQsTUFBTSxDQUFDVSxXQUFYLEVBQXdCO0FBQzdCakQsTUFBQUEsS0FBSyxDQUFDMEIsS0FBTixHQUFjO0FBQUVpQixRQUFBQSxJQUFJLEVBQUVYLFVBQVUsQ0FBQ08sTUFBTSxDQUFDVSxXQUFSO0FBQWxCLE9BQWQ7QUFDRDtBQUNGOztBQUNELFFBQU12QyxVQUFVLEdBQUcsTUFBTVosVUFBVSxDQUFDYSxJQUFYLENBQWdCWCxLQUFoQixFQUF1QlksT0FBdkIsRUFBekI7QUFDQSxTQUFPRixVQUFQO0FBQ0QiLCJzb3VyY2VSb290IjoiL2hvbWUvZ2FyY2lhL0RvY3VtZW50cy9VRlNDL1dlYi90cmFiLWZpbmFsL3dlYi1wcm9wZXJ0eS1yZW50YWwvYmFja2VuZC9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZHJpdmVyIH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICBjb25zdCBjb2xsZWN0aW9uID0gZHJpdmVyLmNvbGxlY3Rpb24oXCJ1c2VyXCIpO1xuICBjb25zdCBxdWVyeSA9IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH07XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUocXVlcnkpO1xuICByZXR1cm4gdXNlcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc2V0KHVzZXJuYW1lLCBuZXdQYXNzd29yZCkge1xuICBjb25zdCBjb2xsZWN0aW9uID0gZHJpdmVyLmNvbGxlY3Rpb24oXCJ1c2VyXCIpO1xuICBjb25zdCBxdWVyeSA9IHsgdXNlcm5hbWUgfTtcbiAgY29uc3QgdG9VcGRhdGUgPSB7XG4gICAgJHNldDogeyBwYXNzd29yZDogbmV3UGFzc3dvcmQgfSxcbiAgfTtcbiAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IGNvbGxlY3Rpb24udXBkYXRlT25lKHF1ZXJ5LCB0b1VwZGF0ZSk7XG4gIHJldHVybiB1cGRhdGVkO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvcGVydGllcygpIHtcbiAgY29uc3QgY29sbGVjdGlvbiA9IGRyaXZlci5jb2xsZWN0aW9uKFwicHJvcGVydHlcIik7XG4gIGNvbnN0IHByb3BlcnRpZXMgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmQoKS50b0FycmF5KCk7XG4gIHJldHVybiBwcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvcGVydHlCeUluc2NyaWNhbyhucl9pbnNjcmljYW8pIHtcbiAgY29uc3QgY29sbGVjdGlvbiA9IGRyaXZlci5jb2xsZWN0aW9uKFwicHJvcGVydHlcIik7XG4gIGNvbnN0IHByb3BlcnR5ID0gYXdhaXQgY29sbGVjdGlvbi5maW5kT25lKHsgbnJfaW5zY3JpY2FvIH0pO1xuICByZXR1cm4gISFwcm9wZXJ0eTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb3BlcnR5U3RhdGUobnJfaW5zY3JpY2FvLCBzaXR1YWNhbykge1xuICBjb25zdCBjb2xsZWN0aW9uID0gZHJpdmVyLmNvbGxlY3Rpb24oXCJwcm9wZXJ0eVwiKTtcbiAgY29uc3QgcXVlcnkgPSB7IG5yX2luc2NyaWNhbzogbnJfaW5zY3JpY2FvIH07XG4gIGNvbnN0IHRvVXBkYXRlID0ge1xuICAgICRzZXQ6IHsgc2l0dWFjYW8gfSxcbiAgfTtcbiAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IGNvbGxlY3Rpb24udXBkYXRlT25lKHF1ZXJ5LCB0b1VwZGF0ZSk7XG4gIHJldHVybiB1cGRhdGVkO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkUHJvcGVydHkoXG4gIG5yX2luc2NyaWNhbyxcbiAgdGl0dWxvLFxuICBpbWcsXG4gIGVuZGVyZWNvLFxuICB0aXBvLFxuICBucl9kb3JtaXRvcmlvcyxcbiAgbnJfYmFuaGVpcm9zLFxuICBucl92YWdhc19nYXJhZ2VtLFxuICB2YWxvclxuKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkcml2ZXIuY29sbGVjdGlvbihcInByb3BlcnR5XCIpO1xuICBsZXQgaW5zZXJ0ID0gbnVsbDtcbiAgaWYgKCEhZ2V0UHJvcGVydHkobnJJbnNjcmljYW8pKSB7XG4gICAgaW5zZXJ0ID0gYXdhaXQgY29sbGVjdGlvbi5pbnNlcnRPbmUoe1xuICAgICAgbnJfaW5zY3JpY2FvLFxuICAgICAgdGl0dWxvLFxuICAgICAgaW1nLFxuICAgICAgZW5kZXJlY28sXG4gICAgICB0aXBvLFxuICAgICAgbnJfZG9ybWl0b3Jpb3M6IHBhcnNlSW50KG5yX2Rvcm1pdG9yaW9zKSxcbiAgICAgIG5yX2JhbmhlaXJvczogcGFyc2VJbnQobnJfYmFuaGVpcm9zKSxcbiAgICAgIG5yX3ZhZ2FzX2dhcmFnZW06IHBhcnNlSW50KG5yX3ZhZ2FzX2dhcmFnZW0pLFxuICAgICAgdmFsb3I6IHBhcnNlRmxvYXQodmFsb3IpLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBpbnNlcnQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRJbnRlcmVzdChucl9pbnNjcmljYW8sIG5vbWUsIHRlbGVmb25lKSB7XG4gIGNvbnN0IHByb3BlcnR5ID0gYXdhaXQgZ2V0UHJvcGVydHlCeUluc2NyaWNhbyhucl9pbnNjcmljYW8pO1xuICBpZiAocHJvcGVydHkpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZHJpdmVyLmNvbGxlY3Rpb24oXCJpbnRlcmVzdFwiKTtcbiAgICBjb25zdCBsZW5ndGggPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmQoeyBub21lLCB0ZWxlZm9uZSB9KTtcbiAgICBpZiAobGVuZ3RoID4gMykge1xuICAgICAgcmV0dXJuIFwiVm9jw6ogYXRpbmdpdSBvIG7Dum1lcm8gbcOheGltbyBkZSByZXF1aXNpw6fDtWVzIGRlIGludGVyZXNzZS5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaXRlbSA9IGF3YWl0IGNvbGxlY3Rpb24uaW5zZXJ0T25lKHtcbiAgICAgICAgbnJfaW5zY3JpY2FvLFxuICAgICAgICBub21lLFxuICAgICAgICB0ZWxlZm9uZSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBcIkVzdGUgaW3Ds3ZlbCBuw6NvIGV4aXN0ZS5cIjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvcGVydGllc1dpdGhGaWx0ZXIoZmlsdGVyKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkcml2ZXIuY29sbGVjdGlvbihcInByb3BlcnR5XCIpO1xuXG4gIHZhciBxdWVyeSA9IHt9O1xuXG4gIGlmIChmaWx0ZXIudGlwb0ltb3ZlbCkge1xuICAgIHF1ZXJ5LnRpcG8gPSBmaWx0ZXIudGlwb0ltb3ZlbDtcbiAgfVxuXG4gIGlmIChmaWx0ZXIuYmFuaGVpcm9zKSB7XG4gICAgY29uc3QgX2JhbmhlaXJvcyA9IHBhcnNlSW50KGZpbHRlci5ucl9iYW5oZWlyb3MpO1xuICAgIGlmIChfYmFuaGVpcm9zID49IDMpIHtcbiAgICAgIHF1ZXJ5Lm5yX2JhbmhlaXJvcyA9IHsgJGd0ZTogX2JhbmhlaXJvcyB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHF1ZXJ5Lm5yX2JhbmhlaXJvcyA9IF9iYW5oZWlyb3M7XG4gICAgfTtcbiAgfVxuXG4gIGlmIChmaWx0ZXIucXVhcnRvcykge1xuICAgIGNvbnN0IF9xdWFydG9zID0gcGFyc2VJbnQoZmlsdGVyLnF1YXJ0b3MpO1xuICAgIGlmIChfcXVhcnRvcyA+PSAzKSB7XG4gICAgICBxdWVyeS5ucl9kb3JtaXRvcmlvcyA9IHsgJGd0ZTogX3F1YXJ0b3MgfVxuICAgIH0gZWxzZSB7XG4gICAgICBxdWVyeS5ucl9kb3JtaXRvcmlvcyA9IF9xdWFydG9zO1xuICAgIH07XG4gIH1cblxuICBpZiAoZmlsdGVyLmdhcmFnZW0pIHtcbiAgICBjb25zdCBfZ2FyYWdlbSA9IHBhcnNlSW50KGZpbHRlci5nYXJhZ2VtKTtcbiAgICBpZiAoX2dhcmFnZW0gPj0gMikge1xuICAgICAgcXVlcnkubnJfdmFnYXNfZ2FyYWdlbSA9IHsgJGd0ZTogX2dhcmFnZW0gfVxuICAgIH0gZWxzZSB7XG4gICAgICBxdWVyeS5ucl92YWdhc19nYXJhZ2VtID0gX2dhcmFnZW07XG4gICAgfTtcbiAgfVxuXG4gIGlmIChmaWx0ZXIucHJlY29NYXhpbW8gJiYgZmlsdGVyLnByZWNvTWluaW1vKSB7XG4gICAgcXVlcnkudmFsb3IgPSB7XG4gICAgICAkbHRlOiBwYXJzZUZsb2F0KGZpbHRlci5wcmVjb01heGltbyksXG4gICAgICAkZ3RlOiBwYXJzZUZsb2F0KGZpbHRlci5wcmVjb01pbmltbyksXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoZmlsdGVyLnByZWNvTWF4aW1vKSB7XG4gICAgICBxdWVyeS52YWxvciA9IHsgJGx0ZTogcGFyc2VGbG9hdChmaWx0ZXIucHJlY29NYXhpbW8pIH07XG4gICAgfSBlbHNlIGlmIChmaWx0ZXIucHJlY29NaW5pbW8pIHtcbiAgICAgIHF1ZXJ5LnZhbG9yID0geyAkZ3RlOiBwYXJzZUZsb2F0KGZpbHRlci5wcmVjb01pbmltbykgfTtcbiAgICB9XG4gIH1cbiAgY29uc3QgcHJvcGVydGllcyA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZChxdWVyeSkudG9BcnJheSgpO1xuICByZXR1cm4gcHJvcGVydGllcztcbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "db.js"
      ],
      "names": [
        "login",
        "username",
        "password",
        "collection",
        "driver",
        "query",
        "user",
        "findOne",
        "reset",
        "newPassword",
        "toUpdate",
        "$set",
        "updated",
        "updateOne",
        "getProperties",
        "properties",
        "find",
        "toArray",
        "getPropertyByInscricao",
        "nr_inscricao",
        "property",
        "updatePropertyState",
        "situacao",
        "addProperty",
        "titulo",
        "img",
        "endereco",
        "tipo",
        "nr_dormitorios",
        "nr_banheiros",
        "nr_vagas_garagem",
        "valor",
        "insert",
        "getProperty",
        "nrInscricao",
        "insertOne",
        "parseInt",
        "parseFloat",
        "addInterest",
        "nome",
        "telefone",
        "length",
        "item",
        "getPropertiesWithFilter",
        "filter",
        "tipoImovel",
        "banheiros",
        "_banheiros",
        "$gte",
        "quartos",
        "_quartos",
        "garagem",
        "_garagem",
        "precoMaximo",
        "precoMinimo",
        "$lte"
      ],
      "mappings": "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",
      "sourceRoot": "/home/garcia/Documents/UFSC/Web/trab-final/web-property-rental/backend/src/",
      "sourcesContent": [
        "import { driver } from \"./index\";\n\nexport async function login(username, password) {\n  const collection = driver.collection(\"user\");\n  const query = { username, password };\n  const user = await collection.findOne(query);\n  return user;\n}\n\nexport async function reset(username, newPassword) {\n  const collection = driver.collection(\"user\");\n  const query = { username };\n  const toUpdate = {\n    $set: { password: newPassword },\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  return updated;\n}\n\nexport async function getProperties() {\n  const collection = driver.collection(\"property\");\n  const properties = await collection.find().toArray();\n  return properties;\n}\n\nexport async function getPropertyByInscricao(nr_inscricao) {\n  const collection = driver.collection(\"property\");\n  const property = await collection.findOne({ nr_inscricao });\n  return !!property;\n}\n\nexport async function updatePropertyState(nr_inscricao, situacao) {\n  const collection = driver.collection(\"property\");\n  const query = { nr_inscricao: nr_inscricao };\n  const toUpdate = {\n    $set: { situacao },\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  return updated;\n}\n\nexport async function addProperty(\n  nr_inscricao,\n  titulo,\n  img,\n  endereco,\n  tipo,\n  nr_dormitorios,\n  nr_banheiros,\n  nr_vagas_garagem,\n  valor\n) {\n  const collection = driver.collection(\"property\");\n  let insert = null;\n  if (!!getProperty(nrInscricao)) {\n    insert = await collection.insertOne({\n      nr_inscricao,\n      titulo,\n      img,\n      endereco,\n      tipo,\n      nr_dormitorios: parseInt(nr_dormitorios),\n      nr_banheiros: parseInt(nr_banheiros),\n      nr_vagas_garagem: parseInt(nr_vagas_garagem),\n      valor: parseFloat(valor),\n    });\n  }\n  return insert;\n}\n\nexport async function addInterest(nr_inscricao, nome, telefone) {\n  const property = await getPropertyByInscricao(nr_inscricao);\n  if (property) {\n    const collection = driver.collection(\"interest\");\n    const length = await collection.find({ nome, telefone });\n    if (length > 3) {\n      return \"Você atingiu o número máximo de requisições de interesse.\";\n    } else {\n      const item = await collection.insertOne({\n        nr_inscricao,\n        nome,\n        telefone,\n      });\n      return item;\n    }\n  } else {\n    return \"Este imóvel não existe.\";\n  }\n}\n\nexport async function getPropertiesWithFilter(filter) {\n  const collection = driver.collection(\"property\");\n\n  var query = {};\n\n  if (filter.tipoImovel) {\n    query.tipo = filter.tipoImovel;\n  }\n\n  if (filter.banheiros) {\n    const _banheiros = parseInt(filter.nr_banheiros);\n    if (_banheiros >= 3) {\n      query.nr_banheiros = { $gte: _banheiros }\n    } else {\n      query.nr_banheiros = _banheiros;\n    };\n  }\n\n  if (filter.quartos) {\n    const _quartos = parseInt(filter.quartos);\n    if (_quartos >= 3) {\n      query.nr_dormitorios = { $gte: _quartos }\n    } else {\n      query.nr_dormitorios = _quartos;\n    };\n  }\n\n  if (filter.garagem) {\n    const _garagem = parseInt(filter.garagem);\n    if (_garagem >= 2) {\n      query.nr_vagas_garagem = { $gte: _garagem }\n    } else {\n      query.nr_vagas_garagem = _garagem;\n    };\n  }\n\n  if (filter.precoMaximo && filter.precoMinimo) {\n    query.valor = {\n      $lte: parseFloat(filter.precoMaximo),\n      $gte: parseFloat(filter.precoMinimo),\n    };\n  } else {\n    if (filter.precoMaximo) {\n      query.valor = { $lte: parseFloat(filter.precoMaximo) };\n    } else if (filter.precoMinimo) {\n      query.valor = { $gte: parseFloat(filter.precoMinimo) };\n    }\n  }\n  const properties = await collection.find(query).toArray();\n  return properties;\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1607661022361
  }
}