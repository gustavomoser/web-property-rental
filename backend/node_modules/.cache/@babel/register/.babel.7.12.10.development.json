{
  "{\"sourceRoot\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend\",\"filename\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/index.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.10": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend",
      "filename": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/index.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/index.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.driver = void 0;\n\nvar _env = require(\"./env\");\n\nvar _db = require(\"./db\");\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _http = _interopRequireDefault(require(\"http\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _mongodb = require(\"mongodb\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst app = (0, _express.default)();\napp.use(_express.default.json({\n  limit: \"50mb\"\n}));\napp.use(_express.default.static(_path.default.resolve(__dirname, \"../public\"))); // REQUISIÇÕES BÁSICAS\n\napp.post(\"/properties\", async (req, res) => {\n  const filter = req.body;\n\n  if (filter) {\n    const properties = await (0, _db.getPropertiesWithFilter)(filter);\n    res.json(properties);\n  } else {\n    const properties = await (0, _db.getProperties)();\n    res.json(properties);\n  }\n}); // REQUISICOES PARA UM CORRETOR\n// requisição para aprovar login\n\napp.post(\"/login\", async (req, res) => {\n  const {\n    username,\n    password\n  } = req.body;\n\n  if (username && password) {\n    const l = await (0, _db.login)(username, password);\n\n    if (!l) {\n      res.json({\n        ok: false,\n        message: \"Usuário ou senha incorretos.\"\n      });\n    } else {\n      res.json({\n        ok: true,\n        data: {\n          username: l.username,\n          name: l.nome,\n          firstLogin: l.first_login\n        }\n      });\n    }\n  } else {\n    return res.json({\n      ok: false,\n      message: \"Problema ao efetuar login.\"\n    });\n  }\n}); // requisição para fazer troca de senha\n\napp.post(\"/reset\", async (req, res) => {\n  const {\n    username,\n    password\n  } = req.body;\n\n  if (username && password) {\n    const l = await (0, _db.reset)(username, password);\n    res.json({\n      ok: true\n    });\n  } else {\n    res.json({\n      ok: false,\n      message: \"Problema ao atualizar senha.\"\n    });\n  }\n}); // requisição para buscar interesses\n\napp.get(\"/interests\", async (req, res) => {\n  const l = await (0, _db.getInterests)();\n  res.json(l);\n}); // requisição para cadastrar imóvel\n\napp.post(\"/property\", async (req, res) => {\n  const {\n    nrInscricao,\n    titulo,\n    img,\n    endereco,\n    tipo,\n    nrDormitorios,\n    nrBanheiros,\n    nrVagas,\n    valor\n  } = req.body;\n\n  if (nrInscricao && img && titulo && endereco && tipo && nrDormitorios && nrBanheiros && nrVagas && valor) {\n    const p = await (0, _db.addProperty)(nrInscricao, titulo, img, endereco, tipo, nrDormitorios, nrBanheiros, nrVagas, valor);\n\n    if (p) {\n      res.json({\n        ok: true\n      });\n    } else {\n      res.json({\n        ok: false,\n        message: \"Já existe um imóvel com este número de inscrição.\"\n      });\n    }\n  } else {\n    res.json({\n      ok: false,\n      message: \"Problema ao inserir imóvel.\"\n    });\n  }\n}); // requisição para alterar situação de um imóvel\n\napp.post(\"/update\", async (req, res) => {\n  const {\n    nr_inscricao,\n    situacao\n  } = req.body;\n\n  if (nr_inscricao && situacao) {\n    const item = await (0, _db.updatePropertyState)(nr_inscricao, situacao);\n    res.json(item);\n  } else {\n    res.json({\n      ok: false,\n      message: \"Problema ao atualizar imóvel.\"\n    });\n  }\n}); // REQUISICOES PARA UM INQUILINO\n// requisição para manifestar interesse em um imóvel\n\napp.post(\"/interest\", async (req, res) => {\n  const {\n    nome,\n    telefone,\n    nr_inscricao\n  } = req.body;\n\n  if (nr_inscricao && telefone && nome) {\n    const item = await (0, _db.addInterest)(nr_inscricao, nome, telefone);\n\n    if (!(item !== null && item !== void 0 && item.ok)) {\n      res.json(item);\n    } else {\n      res.json({\n        ok: true\n      });\n    }\n  } else {\n    res.json({\n      ok: false,\n      message: \"Problema ao inscrever interesse.\"\n    });\n  }\n});\napp.post(\"/delete\", async (req, res) => {\n  const {\n    nr_inscricao,\n    nome,\n    telefone\n  } = req.body;\n  const del = await (0, _db.removeInterest)(nr_inscricao, nome, telefone);\n  console.log(del);\n  res.json(del);\n});\n\nconst server = _http.default.createServer(app);\n\nlet driver = new _mongodb.MongoClient(_env.MONGO_URL, {\n  useUnifiedTopology: true\n});\nexports.driver = driver;\ndriver.connect((err, conn) => {\n  if (err) {\n    console.log(err);\n  } else {\n    exports.driver = driver = conn.db(\"WEB_PROPERTY_RENTAL\");\n    console.log(\"Conexão com MongoDB estabelecida\");\n  }\n});\ndriver.once(\"open\", () => {\n  server.emit(\"ready\");\n});\nserver.on(\"ready\", () => {\n  server.listen(_env.PORT, () => console.log(`App disponível em http://localhost:${_env.PORT}`));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwcCIsInVzZSIsImV4cHJlc3MiLCJqc29uIiwibGltaXQiLCJzdGF0aWMiLCJwYXRoIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsInBvc3QiLCJyZXEiLCJyZXMiLCJmaWx0ZXIiLCJib2R5IiwicHJvcGVydGllcyIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJsIiwib2siLCJtZXNzYWdlIiwiZGF0YSIsIm5hbWUiLCJub21lIiwiZmlyc3RMb2dpbiIsImZpcnN0X2xvZ2luIiwiZ2V0IiwibnJJbnNjcmljYW8iLCJ0aXR1bG8iLCJpbWciLCJlbmRlcmVjbyIsInRpcG8iLCJuckRvcm1pdG9yaW9zIiwibnJCYW5oZWlyb3MiLCJuclZhZ2FzIiwidmFsb3IiLCJwIiwibnJfaW5zY3JpY2FvIiwic2l0dWFjYW8iLCJpdGVtIiwidGVsZWZvbmUiLCJkZWwiLCJjb25zb2xlIiwibG9nIiwic2VydmVyIiwiaHR0cCIsImNyZWF0ZVNlcnZlciIsImRyaXZlciIsIk1vbmdvQ2xpZW50IiwiTU9OR09fVVJMIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiY29ubmVjdCIsImVyciIsImNvbm4iLCJkYiIsIm9uY2UiLCJlbWl0Iiwib24iLCJsaXN0ZW4iLCJQT1JUIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBWUE7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7QUFFQSxNQUFNQSxHQUFHLEdBQUcsdUJBQVo7QUFDQUEsR0FBRyxDQUFDQyxHQUFKLENBQVFDLGlCQUFRQyxJQUFSLENBQWE7QUFBRUMsRUFBQUEsS0FBSyxFQUFFO0FBQVQsQ0FBYixDQUFSO0FBQ0FKLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxpQkFBUUcsTUFBUixDQUFlQyxjQUFLQyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsV0FBeEIsQ0FBZixDQUFSLEUsQ0FFQTs7QUFDQVIsR0FBRyxDQUFDUyxJQUFKLENBQVMsYUFBVCxFQUF3QixPQUFPQyxHQUFQLEVBQVlDLEdB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QWVKLFlBQWYsRUFBNkJkLElBQTdCLEVBQW1DaUIsUUFBbkMsQ0FBbEI7QUFDQUUsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEdBQVo7QUFDQTdCLEVBQUFBLEdBQUcsQ0FBQ1IsSUFBSixDQUFTcUMsR0FBVDtBQUNELENBTEQ7O0FBT0EsTUFBTUcsTUFBTSxHQUFHQyxjQUFLQyxZQUFMLENBQWtCN0MsR0FBbEIsQ0FBZjs7QUFDQSxJQUFJOEMsTUFBTSxHQUFHLElBQUlDLG9CQUFKLENBQWdCQyxjQUFoQixFQUEyQjtBQUFFQyxFQUFBQSxrQkFBa0IsRUFBRTtBQUF0QixDQUEzQixDQUFiOztBQUNBSCxNQUFNLENBQUNJLE9BQVAsQ0FBZSxDQUFDQyxHQUFELEVBQU1DLElBQU4sS0FBZTtBQUM1QixNQUFJRCxHQUFKLEVBQVM7QUFDUFYsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlTLEdBQVo7QUFDRCxHQUZELE1BRU87QUFDTCxxQkFBQUwsTUFBTSxHQUFHTSxJQUFJLENBQUNDLEVBQUwsQ0FBUSxxQkFBUixDQUFUO0FBQ0FaLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGtDQUFaO0FBQ0Q7QUFDRixDQVBEO0FBU0FJLE1BQU0sQ0FBQ1EsSUFBUCxDQUFZLE1BQVosRUFBb0IsTUFBTTtBQUN4QlgsRUFBQUEsTUFBTSxDQUFDWSxJQUFQLENBQVksT0FBWjtBQUNELENBRkQ7QUFJQVosTUFBTSxDQUFDYSxFQUFQLENBQVUsT0FBVixFQUFtQixNQUFNO0FBQ3ZCYixFQUFBQSxNQUFNLENBQUNjLE1BQVAsQ0FBY0MsU0FBZCxFQUFvQixNQUNsQmpCLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLHNDQUFxQ2dCLFNBQUssRUFBdkQsQ0FERjtBQUdELENBSkQiLCJzb3VyY2VSb290IjoiL2hvbWUvZ3VzdGF2b21vc2VyL2NvbXB1dGFjYW8vMjAuMS93ZWIvdHJhYmFsaG8vd2ViLXByb3BlcnR5LXJlbnRhbC9iYWNrZW5kL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQT1JUIH0gZnJvbSBcIi4vZW52XCI7XG5pbXBvcnQge1xuICBhZGRQcm9wZXJ0eSxcbiAgY29ubmVjdCxcbiAgZ2V0UHJvcGVydGllcyxcbiAgZ2V0UHJvcGVydGllc1dpdGhGaWx0ZXIsXG4gIGxvZ2luLFxuICByZXNldCxcbiAgdXBkYXRlUHJvcGVydHlTdGF0ZSxcbiAgYWRkSW50ZXJlc3QsXG4gIGdldEludGVyZXN0cyxcbiAgcmVtb3ZlSW50ZXJlc3QsXG59IGZyb20gXCIuL2RiXCI7XG5pbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGh0dHAgZnJvbSBcImh0dHBcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBNT05HT19VUkwgfSBmcm9tIFwiLi9lbnZcIjtcbmltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIjtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuYXBwLnVzZShleHByZXNzLmpzb24oeyBsaW1pdDogXCI1MG1iXCIgfSkpO1xuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uL3B1YmxpY1wiKSkpO1xuXG4vLyBSRVFVSVNJw4fDlUVTIELDgVNJQ0FTXG5hcHAucG9zdChcIi9wcm9wZXJ0aWVzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBmaWx0ZXIgPSByZXEuYm9keTtcbiAgaWYgKGZpbHRlcikge1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBhd2FpdCBnZXRQcm9wZXJ0aWVzV2l0aEZpbHRlcihmaWx0ZXIpO1xuICAgIHJlcy5qc29uKHByb3BlcnRpZXMpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBhd2FpdCBnZXRQcm9wZXJ0aWVzKCk7XG4gICAgcmVzLmpzb24ocHJvcGVydGllcyk7XG4gIH1cbn0pO1xuXG4vLyBSRVFVSVNJQ09FUyBQQVJBIFVNIENPUlJFVE9SXG4vLyByZXF1aXNpw6fDo28gcGFyYSBhcHJvdmFyIGxvZ2luXG5hcHAucG9zdChcIi9sb2dpblwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICBpZiAodXNlcm5hbWUgJiYgcGFzc3dvcmQpIHtcbiAgICBjb25zdCBsID0gYXdhaXQgbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcbiAgICBpZiAoIWwpIHtcbiAgICAgIHJlcy5qc29uKHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBcIlVzdcOhcmlvIG91IHNlbmhhIGluY29ycmV0b3MuXCIgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGRhdGE6IHsgdXNlcm5hbWU6IGwudXNlcm5hbWUsIG5hbWU6IGwubm9tZSwgZmlyc3RMb2dpbjogbC5maXJzdF9sb2dpbiB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiByZXMuanNvbih7IG9rOiBmYWxzZSwgbWVzc2FnZTogXCJQcm9ibGVtYSBhbyBlZmV0dWFyIGxvZ2luLlwiIH0pO1xuICB9XG59KTtcblxuLy8gcmVxdWlzacOnw6NvIHBhcmEgZmF6ZXIgdHJvY2EgZGUgc2VuaGFcbmFwcC5wb3N0KFwiL3Jlc2V0XCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gIGlmICh1c2VybmFtZSAmJiBwYXNzd29yZCkge1xuICAgIGNvbnN0IGwgPSBhd2FpdCByZXNldCh1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgIHJlcy5qc29uKHsgb2s6IHRydWUgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmVzLmpzb24oeyBvazogZmFsc2UsIG1lc3NhZ2U6IFwiUHJvYmxlbWEgYW8gYXR1YWxpemFyIHNlbmhhLlwiIH0pO1xuICB9XG59KTtcblxuLy8gcmVxdWlzacOnw6NvIHBhcmEgYnVzY2FyIGludGVyZXNzZXNcbmFwcC5nZXQoXCIvaW50ZXJlc3RzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBsID0gYXdhaXQgZ2V0SW50ZXJlc3RzKCk7XG4gIHJlcy5qc29uKGwpO1xufSk7XG5cbi8vIHJlcXVpc2nDp8OjbyBwYXJhIGNhZGFzdHJhciBpbcOzdmVsXG5hcHAucG9zdChcIi9wcm9wZXJ0eVwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3Qge1xuICAgIG5ySW5zY3JpY2FvLFxuICAgIHRpdHVsbyxcbiAgICBpbWcsXG4gICAgZW5kZXJlY28sXG4gICAgdGlwbyxcbiAgICBuckRvcm1pdG9yaW9zLFxuICAgIG5yQmFuaGVpcm9zLFxuICAgIG5yVmFnYXMsXG4gICAgdmFsb3IsXG4gIH0gPSByZXEuYm9keTtcbiAgaWYgKFxuICAgIG5ySW5zY3JpY2FvICYmXG4gICAgaW1nICYmXG4gICAgdGl0dWxvICYmXG4gICAgZW5kZXJlY28gJiZcbiAgICB0aXBvICYmXG4gICAgbnJEb3JtaXRvcmlvcyAmJlxuICAgIG5yQmFuaGVpcm9zICYmXG4gICAgbnJWYWdhcyAmJlxuICAgIHZhbG9yXG4gICkge1xuICAgIGNvbnN0IHAgPSBhd2FpdCBhZGRQcm9wZXJ0eShcbiAgICAgIG5ySW5zY3JpY2FvLFxuICAgICAgdGl0dWxvLFxuICAgICAgaW1nLFxuICAgICAgZW5kZXJlY28sXG4gICAgICB0aXBvLFxuICAgICAgbnJEb3JtaXRvcmlvcyxcbiAgICAgIG5yQmFuaGVpcm9zLFxuICAgICAgbnJWYWdhcyxcbiAgICAgIHZhbG9yXG4gICAgKTtcbiAgICBpZiAocCkge1xuICAgICAgcmVzLmpzb24oeyBvazogdHJ1ZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBvazogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IFwiSsOhIGV4aXN0ZSB1bSBpbcOzdmVsIGNvbSBlc3RlIG7Dum1lcm8gZGUgaW5zY3Jpw6fDo28uXCIsXG4gICAgICB9KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmVzLmpzb24oeyBvazogZmFsc2UsIG1lc3NhZ2U6IFwiUHJvYmxlbWEgYW8gaW5zZXJpciBpbcOzdmVsLlwiIH0pO1xuICB9XG59KTtcblxuLy8gcmVxdWlzacOnw6NvIHBhcmEgYWx0ZXJhciBzaXR1YcOnw6NvIGRlIHVtIGltw7N2ZWxcbmFwcC5wb3N0KFwiL3VwZGF0ZVwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBucl9pbnNjcmljYW8sIHNpdHVhY2FvIH0gPSByZXEuYm9keTtcbiAgaWYgKG5yX2luc2NyaWNhbyAmJiBzaXR1YWNhbykge1xuICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCB1cGRhdGVQcm9wZXJ0eVN0YXRlKG5yX2luc2NyaWNhbywgc2l0dWFjYW8pO1xuICAgIHJlcy5qc29uKGl0ZW0pO1xuICB9IGVsc2Uge1xuICAgIHJlcy5qc29uKHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBcIlByb2JsZW1hIGFvIGF0dWFsaXphciBpbcOzdmVsLlwiIH0pO1xuICB9XG59KTtcblxuLy8gUkVRVUlTSUNPRVMgUEFSQSBVTSBJTlFVSUxJTk9cbi8vIHJlcXVpc2nDp8OjbyBwYXJhIG1hbmlmZXN0YXIgaW50ZXJlc3NlIGVtIHVtIGltw7N2ZWxcbmFwcC5wb3N0KFwiL2ludGVyZXN0XCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IG5vbWUsIHRlbGVmb25lLCBucl9pbnNjcmljYW8gfSA9IHJlcS5ib2R5O1xuICBpZiAobnJfaW5zY3JpY2FvICYmIHRlbGVmb25lICYmIG5vbWUpIHtcbiAgICBjb25zdCBpdGVtID0gYXdhaXQgYWRkSW50ZXJlc3QobnJfaW5zY3JpY2FvLCBub21lLCB0ZWxlZm9uZSk7XG4gICAgaWYgKCFpdGVtPy5vaykge1xuICAgICAgcmVzLmpzb24oaXRlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5qc29uKHsgb2s6IHRydWUgfSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcy5qc29uKHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBcIlByb2JsZW1hIGFvIGluc2NyZXZlciBpbnRlcmVzc2UuXCIgfSk7XG4gIH1cbn0pO1xuXG5hcHAucG9zdChcIi9kZWxldGVcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgbnJfaW5zY3JpY2FvLCBub21lLCB0ZWxlZm9uZSB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IGRlbCA9IGF3YWl0IHJlbW92ZUludGVyZXN0KG5yX2luc2NyaWNhbywgbm9tZSwgdGVsZWZvbmUpO1xuICBjb25zb2xlLmxvZyhkZWwpO1xuICByZXMuanNvbihkZWwpO1xufSk7XG5cbmNvbnN0IHNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGFwcCk7XG5sZXQgZHJpdmVyID0gbmV3IE1vbmdvQ2xpZW50KE1PTkdPX1VSTCwgeyB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSk7XG5kcml2ZXIuY29ubmVjdCgoZXJyLCBjb25uKSA9PiB7XG4gIGlmIChlcnIpIHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9IGVsc2Uge1xuICAgIGRyaXZlciA9IGNvbm4uZGIoXCJXRUJfUFJPUEVSVFlfUkVOVEFMXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiQ29uZXjDo28gY29tIE1vbmdvREIgZXN0YWJlbGVjaWRhXCIpO1xuICB9XG59KTtcblxuZHJpdmVyLm9uY2UoXCJvcGVuXCIsICgpID0+IHtcbiAgc2VydmVyLmVtaXQoXCJyZWFkeVwiKTtcbn0pO1xuXG5zZXJ2ZXIub24oXCJyZWFkeVwiLCAoKSA9PiB7XG4gIHNlcnZlci5saXN0ZW4oUE9SVCwgKCkgPT5cbiAgICBjb25zb2xlLmxvZyhgQXBwIGRpc3BvbsOtdmVsIGVtIGh0dHA6Ly9sb2NhbGhvc3Q6JHtQT1JUfWApXG4gICk7XG59KTtcblxuZXhwb3J0IHsgZHJpdmVyIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "app",
        "use",
        "express",
        "json",
        "limit",
        "static",
        "path",
        "resolve",
        "__dirname",
        "post",
        "req",
        "res",
        "filter",
        "body",
        "properties",
        "username",
        "password",
        "l",
        "ok",
        "message",
        "data",
        "name",
        "nome",
        "firstLogin",
        "first_login",
        "get",
        "nrInscricao",
        "titulo",
        "img",
        "endereco",
        "tipo",
        "nrDormitorios",
        "nrBanheiros",
        "nrVagas",
        "valor",
        "p",
        "nr_inscricao",
        "situacao",
        "item",
        "telefone",
        "del",
        "console",
        "log",
        "server",
        "http",
        "createServer",
        "driver",
        "MongoClient",
        "MONGO_URL",
        "useUnifiedTopology",
        "connect",
        "err",
        "conn",
        "db",
        "once",
        "emit",
        "on",
        "listen",
        "PORT"
      ],
      "mappings": "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",
      "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
      "sourcesContent": [
        "import { PORT } from \"./env\";\nimport {\n  addProperty,\n  connect,\n  getProperties,\n  getPropertiesWithFilter,\n  login,\n  reset,\n  updatePropertyState,\n  addInterest,\n  getInterests,\n  removeInterest,\n} from \"./db\";\nimport express from \"express\";\nimport http from \"http\";\nimport path from \"path\";\nimport { MONGO_URL } from \"./env\";\nimport { MongoClient } from \"mongodb\";\n\nconst app = express();\napp.use(express.json({ limit: \"50mb\" }));\napp.use(express.static(path.resolve(__dirname, \"../public\")));\n\n// REQUISIÇÕES BÁSICAS\napp.post(\"/properties\", async (req, res) => {\n  const filter = req.body;\n  if (filter) {\n    const properties = await getPropertiesWithFilter(filter);\n    res.json(properties);\n  } else {\n    const properties = await getProperties();\n    res.json(properties);\n  }\n});\n\n// REQUISICOES PARA UM CORRETOR\n// requisição para aprovar login\napp.post(\"/login\", async (req, res) => {\n  const { username, password } = req.body;\n  if (username && password) {\n    const l = await login(username, password);\n    if (!l) {\n      res.json({ ok: false, message: \"Usuário ou senha incorretos.\" });\n    } else {\n      res.json({\n        ok: true,\n        data: { username: l.username, name: l.nome, firstLogin: l.first_login },\n      });\n    }\n  } else {\n    return res.json({ ok: false, message: \"Problema ao efetuar login.\" });\n  }\n});\n\n// requisição para fazer troca de senha\napp.post(\"/reset\", async (req, res) => {\n  const { username, password } = req.body;\n  if (username && password) {\n    const l = await reset(username, password);\n    res.json({ ok: true });\n  } else {\n    res.json({ ok: false, message: \"Problema ao atualizar senha.\" });\n  }\n});\n\n// requisição para buscar interesses\napp.get(\"/interests\", async (req, res) => {\n  const l = await getInterests();\n  res.json(l);\n});\n\n// requisição para cadastrar imóvel\napp.post(\"/property\", async (req, res) => {\n  const {\n    nrInscricao,\n    titulo,\n    img,\n    endereco,\n    tipo,\n    nrDormitorios,\n    nrBanheiros,\n    nrVagas,\n    valor,\n  } = req.body;\n  if (\n    nrInscricao &&\n    img &&\n    titulo &&\n    endereco &&\n    tipo &&\n    nrDormitorios &&\n    nrBanheiros &&\n    nrVagas &&\n    valor\n  ) {\n    const p = await addProperty(\n      nrInscricao,\n      titulo,\n      img,\n      endereco,\n      tipo,\n      nrDormitorios,\n      nrBanheiros,\n      nrVagas,\n      valor\n    );\n    if (p) {\n      res.json({ ok: true });\n    } else {\n      res.json({\n        ok: false,\n        message: \"Já existe um imóvel com este número de inscrição.\",\n      });\n    }\n  } else {\n    res.json({ ok: false, message: \"Problema ao inserir imóvel.\" });\n  }\n});\n\n// requisição para alterar situação de um imóvel\napp.post(\"/update\", async (req, res) => {\n  const { nr_inscricao, situacao } = req.body;\n  if (nr_inscricao && situacao) {\n    const item = await updatePropertyState(nr_inscricao, situacao);\n    res.json(item);\n  } else {\n    res.json({ ok: false, message: \"Problema ao atualizar imóvel.\" });\n  }\n});\n\n// REQUISICOES PARA UM INQUILINO\n// requisição para manifestar interesse em um imóvel\napp.post(\"/interest\", async (req, res) => {\n  const { nome, telefone, nr_inscricao } = req.body;\n  if (nr_inscricao && telefone && nome) {\n    const item = await addInterest(nr_inscricao, nome, telefone);\n    if (!item?.ok) {\n      res.json(item);\n    } else {\n      res.json({ ok: true });\n    }\n  } else {\n    res.json({ ok: false, message: \"Problema ao inscrever interesse.\" });\n  }\n});\n\napp.post(\"/delete\", async (req, res) => {\n  const { nr_inscricao, nome, telefone } = req.body;\n  const del = await removeInterest(nr_inscricao, nome, telefone);\n  console.log(del);\n  res.json(del);\n});\n\nconst server = http.createServer(app);\nlet driver = new MongoClient(MONGO_URL, { useUnifiedTopology: true });\ndriver.connect((err, conn) => {\n  if (err) {\n    console.log(err);\n  } else {\n    driver = conn.db(\"WEB_PROPERTY_RENTAL\");\n    console.log(\"Conexão com MongoDB estabelecida\");\n  }\n});\n\ndriver.once(\"open\", () => {\n  server.emit(\"ready\");\n});\n\nserver.on(\"ready\", () => {\n  server.listen(PORT, () =>\n    console.log(`App disponível em http://localhost:${PORT}`)\n  );\n});\n\nexport { driver };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1607793295929
  },
  "{\"sourceRoot\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend\",\"filename\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/env.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.10": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend",
      "filename": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/env.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/env.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/env.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
        "sourceFileName": "env.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MONGO_URL = exports.PORT = void 0;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-console */\nconst env = _path.default.join(__dirname, \"../.env\");\n\n_dotenv.default.config({\n  path: env\n});\n\nlet error = false;\n\nif (!process.env.PORT) {\n  console.log(\"Defina a variável PORT em backend/.env \\n\");\n  error = true;\n}\n\nif (!process.env.MONGO_URL) {\n  console.log(\"Defina a variável MONGO_URL em backend/.env\");\n  error = true;\n}\n\nerror && process.exit(1);\nconst PORT = parseInt(process.env.PORT);\nexports.PORT = PORT;\nconst MONGO_URL = process.env.MONGO_URL;\nexports.MONGO_URL = MONGO_URL;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudi5qcyJdLCJuYW1lcyI6WyJlbnYiLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsImRvdGVudiIsImNvbmZpZyIsImVycm9yIiwicHJvY2VzcyIsIlBPUlQiLCJjb25zb2xlIiwibG9nIiwiTU9OR09fVVJMIiwiZXhpdCIsInBhcnNlSW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7Ozs7QUFGQTtBQUlBLE1BQU1BLEdBQUcsR0FBR0MsY0FBS0MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFNBQXJCLENBQVo7O0FBQ0FDLGdCQUFPQyxNQUFQLENBQWM7QUFBRUosRUFBQUEsSUFBSSxFQUFFRDtBQUFSLENBQWQ7O0FBRUEsSUFBSU0sS0FBSyxHQUFHLEtBQVo7O0FBRUEsSUFBSSxDQUFDQyxPQUFPLENBQUNQLEdBQVIsQ0FBWVEsSUFBakIsRUFBdUI7QUFDckJDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDJDQUFaO0FBQ0FKLEVBQUFBLEtBQUssR0FBRyxJQUFSO0FBQ0Q7O0FBRUQsSUFBSSxDQUFDQyxPQUFPLENBQUNQLEdBQVIsQ0FBWVcsU0FBakIsRUFBNEI7QUFDMUJGLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDZDQUFaO0FBQ0FKLEVBQUFBLEtBQUssR0FBRyxJQUFSO0FBQ0Q7O0FBRURBLEtBQUssSUFBSUMsT0FBTyxDQUFDSyxJQUFSLENBQWEsQ0FBYixDQUFUO0FBRUEsTUFBTUosSUFBSSxHQUFHSyxRQUFRLENBQUNOLE9BQU8sQ0FBQ1AsR0FBUixDQUFZUSxJQUFiLENBQXJCOztBQUNBLE1BQU1HLFNBQVMsR0FBR0osT0FBTyxDQUFDUCxHQUFSLENBQVlXLFNBQTlCIiwic291cmNlUm9vdCI6Ii9ob21lL2d1c3Rhdm9tb3Nlci9jb21wdXRhY2FvLzIwLjEvd2ViL3RyYWJhbGhvL3dlYi1wcm9wZXJ0eS1yZW50YWwvYmFja2VuZC9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuXG5jb25zdCBlbnYgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uLy5lbnZcIik7XG5kb3RlbnYuY29uZmlnKHsgcGF0aDogZW52IH0pO1xuXG5sZXQgZXJyb3IgPSBmYWxzZTtcblxuaWYgKCFwcm9jZXNzLmVudi5QT1JUKSB7XG4gIGNvbnNvbGUubG9nKFwiRGVmaW5hIGEgdmFyacOhdmVsIFBPUlQgZW0gYmFja2VuZC8uZW52IFxcblwiKTtcbiAgZXJyb3IgPSB0cnVlO1xufVxuXG5pZiAoIXByb2Nlc3MuZW52Lk1PTkdPX1VSTCkge1xuICBjb25zb2xlLmxvZyhcIkRlZmluYSBhIHZhcmnDoXZlbCBNT05HT19VUkwgZW0gYmFja2VuZC8uZW52XCIpO1xuICBlcnJvciA9IHRydWU7XG59XG5cbmVycm9yICYmIHByb2Nlc3MuZXhpdCgxKTtcblxuY29uc3QgUE9SVCA9IHBhcnNlSW50KHByb2Nlc3MuZW52LlBPUlQpO1xuY29uc3QgTU9OR09fVVJMID0gcHJvY2Vzcy5lbnYuTU9OR09fVVJMO1xuZXhwb3J0IHsgUE9SVCwgTU9OR09fVVJMIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "env.js"
      ],
      "names": [
        "env",
        "path",
        "join",
        "__dirname",
        "dotenv",
        "config",
        "error",
        "process",
        "PORT",
        "console",
        "log",
        "MONGO_URL",
        "exit",
        "parseInt"
      ],
      "mappings": ";;;;;;;AACA;;AACA;;;;AAFA;AAIA,MAAMA,GAAG,GAAGC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,SAArB,CAAZ;;AACAC,gBAAOC,MAAP,CAAc;AAAEJ,EAAAA,IAAI,EAAED;AAAR,CAAd;;AAEA,IAAIM,KAAK,GAAG,KAAZ;;AAEA,IAAI,CAACC,OAAO,CAACP,GAAR,CAAYQ,IAAjB,EAAuB;AACrBC,EAAAA,OAAO,CAACC,GAAR,CAAY,2CAAZ;AACAJ,EAAAA,KAAK,GAAG,IAAR;AACD;;AAED,IAAI,CAACC,OAAO,CAACP,GAAR,CAAYW,SAAjB,EAA4B;AAC1BF,EAAAA,OAAO,CAACC,GAAR,CAAY,6CAAZ;AACAJ,EAAAA,KAAK,GAAG,IAAR;AACD;;AAEDA,KAAK,IAAIC,OAAO,CAACK,IAAR,CAAa,CAAb,CAAT;AAEA,MAAMJ,IAAI,GAAGK,QAAQ,CAACN,OAAO,CAACP,GAAR,CAAYQ,IAAb,CAArB;;AACA,MAAMG,SAAS,GAAGJ,OAAO,CAACP,GAAR,CAAYW,SAA9B",
      "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
      "sourcesContent": [
        "/* eslint-disable no-console */\nimport path from \"path\";\nimport dotenv from \"dotenv\";\n\nconst env = path.join(__dirname, \"../.env\");\ndotenv.config({ path: env });\n\nlet error = false;\n\nif (!process.env.PORT) {\n  console.log(\"Defina a variável PORT em backend/.env \\n\");\n  error = true;\n}\n\nif (!process.env.MONGO_URL) {\n  console.log(\"Defina a variável MONGO_URL em backend/.env\");\n  error = true;\n}\n\nerror && process.exit(1);\n\nconst PORT = parseInt(process.env.PORT);\nconst MONGO_URL = process.env.MONGO_URL;\nexport { PORT, MONGO_URL };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1607749263697
  },
  "{\"sourceRoot\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend\",\"filename\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/env.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.10": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend",
      "filename": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/env.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/env.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/env.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
        "sourceFileName": "env.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MONGO_URL = exports.PORT = void 0;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-console */\nconst env = _path.default.join(__dirname, \"../.env\");\n\n_dotenv.default.config({\n  path: env\n});\n\nlet error = false;\n\nif (!process.env.PORT) {\n  console.log(\"Defina a variável PORT em backend/.env \\n\");\n  error = true;\n}\n\nif (!process.env.MONGO_URL) {\n  console.log(\"Defina a variável MONGO_URL em backend/.env\");\n  error = true;\n}\n\nerror && process.exit(1);\nconst PORT = parseInt(process.env.PORT);\nexports.PORT = PORT;\nconst MONGO_URL = process.env.MONGO_URL;\nexports.MONGO_URL = MONGO_URL;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudi5qcyJdLCJuYW1lcyI6WyJlbnYiLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsImRvdGVudiIsImNvbmZpZyIsImVycm9yIiwicHJvY2VzcyIsIlBPUlQiLCJjb25zb2xlIiwibG9nIiwiTU9OR09fVVJMIiwiZXhpdCIsInBhcnNlSW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7Ozs7QUFGQTtBQUlBLE1BQU1BLEdBQUcsR0FBR0MsY0FBS0MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFNBQXJCLENBQVo7O0FBQ0FDLGdCQUFPQyxNQUFQLENBQWM7QUFBRUosRUFBQUEsSUFBSSxFQUFFRDtBQUFSLENBQWQ7O0FBRUEsSUFBSU0sS0FBSyxHQUFHLEtBQVo7O0FBRUEsSUFBSSxDQUFDQyxPQUFPLENBQUNQLEdBQVIsQ0FBWVEsSUFBakIsRUFBdUI7QUFDckJDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDJDQUFaO0FBQ0FKLEVBQUFBLEtBQUssR0FBRyxJQUFSO0FBQ0Q7O0FBRUQsSUFBSSxDQUFDQyxPQUFPLENBQUNQLEdBQVIsQ0FBWVcsU0FBakIsRUFBNEI7QUFDMUJGLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDZDQUFaO0FBQ0FKLEVBQUFBLEtBQUssR0FBRyxJQUFSO0FBQ0Q7O0FBRURBLEtBQUssSUFBSUMsT0FBTyxDQUFDSyxJQUFSLENBQWEsQ0FBYixDQUFUO0FBRUEsTUFBTUosSUFBSSxHQUFHSyxRQUFRLENBQUNOLE9BQU8sQ0FBQ1AsR0FBUixDQUFZUSxJQUFiLENBQXJCOztBQUNBLE1BQU1HLFNBQVMsR0FBR0osT0FBTyxDQUFDUCxHQUFSLENBQVlXLFNBQTlCIiwic291cmNlUm9vdCI6Ii9ob21lL2d1c3Rhdm9tb3Nlci9jb21wdXRhY2FvLzIwLjEvd2ViL3RyYWJhbGhvL3dlYi1wcm9wZXJ0eS1yZW50YWwvYmFja2VuZC9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuXG5jb25zdCBlbnYgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uLy5lbnZcIik7XG5kb3RlbnYuY29uZmlnKHsgcGF0aDogZW52IH0pO1xuXG5sZXQgZXJyb3IgPSBmYWxzZTtcblxuaWYgKCFwcm9jZXNzLmVudi5QT1JUKSB7XG4gIGNvbnNvbGUubG9nKFwiRGVmaW5hIGEgdmFyacOhdmVsIFBPUlQgZW0gYmFja2VuZC8uZW52IFxcblwiKTtcbiAgZXJyb3IgPSB0cnVlO1xufVxuXG5pZiAoIXByb2Nlc3MuZW52Lk1PTkdPX1VSTCkge1xuICBjb25zb2xlLmxvZyhcIkRlZmluYSBhIHZhcmnDoXZlbCBNT05HT19VUkwgZW0gYmFja2VuZC8uZW52XCIpO1xuICBlcnJvciA9IHRydWU7XG59XG5cbmVycm9yICYmIHByb2Nlc3MuZXhpdCgxKTtcblxuY29uc3QgUE9SVCA9IHBhcnNlSW50KHByb2Nlc3MuZW52LlBPUlQpO1xuY29uc3QgTU9OR09fVVJMID0gcHJvY2Vzcy5lbnYuTU9OR09fVVJMO1xuZXhwb3J0IHsgUE9SVCwgTU9OR09fVVJMIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "env.js"
      ],
      "names": [
        "env",
        "path",
        "join",
        "__dirname",
        "dotenv",
        "config",
        "error",
        "process",
        "PORT",
        "console",
        "log",
        "MONGO_URL",
        "exit",
        "parseInt"
      ],
      "mappings": ";;;;;;;AACA;;AACA;;;;AAFA;AAIA,MAAMA,GAAG,GAAGC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,SAArB,CAAZ;;AACAC,gBAAOC,MAAP,CAAc;AAAEJ,EAAAA,IAAI,EAAED;AAAR,CAAd;;AAEA,IAAIM,KAAK,GAAG,KAAZ;;AAEA,IAAI,CAACC,OAAO,CAACP,GAAR,CAAYQ,IAAjB,EAAuB;AACrBC,EAAAA,OAAO,CAACC,GAAR,CAAY,2CAAZ;AACAJ,EAAAA,KAAK,GAAG,IAAR;AACD;;AAED,IAAI,CAACC,OAAO,CAACP,GAAR,CAAYW,SAAjB,EAA4B;AAC1BF,EAAAA,OAAO,CAACC,GAAR,CAAY,6CAAZ;AACAJ,EAAAA,KAAK,GAAG,IAAR;AACD;;AAEDA,KAAK,IAAIC,OAAO,CAACK,IAAR,CAAa,CAAb,CAAT;AAEA,MAAMJ,IAAI,GAAGK,QAAQ,CAACN,OAAO,CAACP,GAAR,CAAYQ,IAAb,CAArB;;AACA,MAAMG,SAAS,GAAGJ,OAAO,CAACP,GAAR,CAAYW,SAA9B",
      "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
      "sourcesContent": [
        "/* eslint-disable no-console */\nimport path from \"path\";\nimport dotenv from \"dotenv\";\n\nconst env = path.join(__dirname, \"../.env\");\ndotenv.config({ path: env });\n\nlet error = false;\n\nif (!process.env.PORT) {\n  console.log(\"Defina a variável PORT em backend/.env \\n\");\n  error = true;\n}\n\nif (!process.env.MONGO_URL) {\n  console.log(\"Defina a variável MONGO_URL em backend/.env\");\n  error = true;\n}\n\nerror && process.exit(1);\n\nconst PORT = parseInt(process.env.PORT);\nconst MONGO_URL = process.env.MONGO_URL;\nexport { PORT, MONGO_URL };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1607749263697
  },
  "{\"sourceRoot\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend\",\"filename\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/db.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.10": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend",
      "filename": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/db.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/db.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/db.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
        "sourceFileName": "db.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.login = login;\nexports.reset = reset;\nexports.getProperties = getProperties;\nexports.getPropertyByInscricao = getPropertyByInscricao;\nexports.updatePropertyState = updatePropertyState;\nexports.addProperty = addProperty;\nexports.addInterest = addInterest;\nexports.getPropertiesWithFilter = getPropertiesWithFilter;\nexports.getInterests = getInterests;\nexports.removeInterest = removeInterest;\n\nvar _index = require(\"./index\");\n\nasync function login(username, password) {\n  const collection = _index.driver.collection(\"user\");\n\n  const query = {\n    username,\n    password\n  };\n  const user = await collection.findOne(query);\n  return user;\n}\n\nasync function reset(username, newPassword) {\n  const collection = _index.driver.collection(\"user\");\n\n  const query = {\n    username\n  };\n  const toUpdate = {\n    $set: {\n      password: newPassword,\n      first_login: false\n    }\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  return updated;\n}\n\nasync function getProperties() {\n  const collection = _index.driver.collection(\"property\");\n\n  const properties = await collection.find().toArray();\n  return properties;\n}\n\nasync function getPropertyByInscricao(nr_inscricao) {\n  const collection = _index.driver.collection(\"property\");\n\n  const property = await collection.findOne({\n    nr_inscricao\n  });\n  return property;\n}\n\nasync function updatePropertyState(nr_inscricao, situacao) {\n  const collection = _index.driver.collection(\"property\");\n\n  const query = {\n    nr_inscricao: nr_inscricao\n  };\n  const toUpdate = {\n    $set: {\n      situacao\n    }\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n\n  if (!updated) {\n    return {\n      ok: false,\n      message: \"Não foi possível atualizar registro\"\n    };\n  }\n\n  return {\n    ok: true\n  };\n}\n\nasync function addProperty(nr_inscricao, titulo, img, endereco, tipo, nr_dormitorios, nr_banheiros, nr_vagas_garagem, valor) {\n  const collection = _index.driver.collection(\"property\");\n\n  let insert = null;\n  const exist = await getPropertyByInscricao(nr_inscricao);\n\n  if (!exist) {\n    insert = await collection.insertOne({\n      nr_inscricao,\n      titulo,\n      img,\n      endereco,\n      tipo,\n      nr_dormitorios: parseInt(nr_dormitorios),\n      nr_banheiros: parseInt(nr_banheiros),\n      nr_vagas_garagem: parseInt(nr_vagas_garagem),\n      valor: parseFloat(valor),\n      situacao: \"disponivel\"\n    });\n  }\n\n  return insert;\n}\n\nasync function addInterest(nr_inscricao, nome, telefone) {\n  const property = await getPropertyByInscricao(nr_inscricao);\n\n  if (property) {\n    const collection = _index.driver.collection(\"interest\");\n\n    const aux = await collection.find({\n      nome,\n      telefone\n    }).toArray();\n\n    if (aux.length > 2) {\n      return {\n        ok: false,\n        message: \"Você atingiu o número máximo de requisições de interesse.\"\n      };\n    } else {\n      const item = await collection.insertOne({\n        nr_inscricao,\n        nome,\n        telefone\n      });\n      return item;\n    }\n  } else {\n    return {\n      ok: false,\n      message: \"Este imóvel não existe.\"\n    };\n  }\n}\n\nasync function getPropertiesWithFilter(filter) {\n  const collection = _index.driver.collection(\"property\");\n\n  var query = {};\n\n  if (filter.tipoImovel) {\n    query.tipo = filter.tipoImovel;\n  }\n\n  if (filter.banheiros) {\n    const _banheiros = parseInt(filter.nr_banheiros);\n\n    if (_banheiros >= 3) {\n      query.nr_banheiros = {\n        $gte: _banheiros\n      };\n    } else {\n      query.nr_banheiros = _banheiros;\n    }\n  }\n\n  if (filter.quartos) {\n    const _quartos = parseInt(filter.quartos);\n\n    if (_quartos >= 3) {\n      query.nr_dormitorios = {\n        $gte: _quartos\n      };\n    } else {\n      query.nr_dormitorios = _quartos;\n    }\n  }\n\n  if (filter.garagem) {\n    const _garagem = parseInt(filter.garagem);\n\n    if (_garagem >= 2) {\n      query.nr_vagas_garagem = {\n        $gte: _garagem\n      };\n    } else {\n      query.nr_vagas_garagem = _garagem;\n    }\n  }\n\n  if (filter.precoMaximo && filter.precoMinimo) {\n    query.valor = {\n      $lte: parseFloat(filter.precoMaximo),\n      $gte: parseFloat(filter.precoMinimo)\n    };\n  } else {\n    if (filter.precoMaximo) {\n      query.valor = {\n        $lte: parseFloat(filter.precoMaximo)\n      };\n    } else if (filter.precoMinimo) {\n      query.valor = {\n        $gte: parseFloat(filter.precoMinimo)\n      };\n    }\n  }\n\n  if (!filter.logged) {\n    query.situacao = {\n      $in: [\"disponivel\", \"reservado\"]\n    };\n  }\n\n  const properties = await collection.find(query).toArray();\n  return properties;\n}\n\nasync function getInterests() {\n  const collection = _index.driver.collection(\"interest\");\n\n  const interests = await collection.find().toArray();\n  return interests;\n}\n\nasync function removeInterest(nr_inscricao, nome, telefone) {\n  const property = await getPropertyByInscricao(nr_inscricao);\n\n  if (property.situacao !== \"disponivel\") {\n    return {\n      ok: false,\n      message: \"O imóvel não está disponível para reserva.\"\n    };\n  } else {\n    const collection = _index.driver.collection(\"interest\");\n\n    const interests = await collection.remove({\n      nr_inscricao,\n      nome,\n      telefone\n    });\n\n    const properties = _index.driver.collection(\"property\");\n\n    const updated = await properties.updateOne({\n      nr_inscricao\n    }, {\n      $set: {\n        situacao: \"reservado\"\n      }\n    });\n\n    if (interests && updated) {\n      return {\n        ok: true\n      };\n    } else {\n      return {\n        ok: false,\n        message: \"Problema ao resolver situação de interesse.\"\n      };\n    }\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiLmpzIl0sIm5hbWVzIjpbImxvZ2luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImNvbGxlY3Rpb24iLCJkcml2ZXIiLCJxdWVyeSIsInVzZXIiLCJmaW5kT25lIiwicmVzZXQiLCJuZXdQYXNzd29yZCIsInRvVXBkYXRlIiwiJHNldCIsImZpcnN0X2xvZ2luIiwidXBkYXRlZCIsInVwZGF0ZU9uZSIsImdldFByb3BlcnRpZXMiLCJwcm9wZXJ0aWVzIiwiZmluZCIsInRvQXJyYXkiLCJnZXRQcm9wZXJ0eUJ5SW5zY3JpY2FvIiwibnJfaW5zY3JpY2FvIiwicHJvcGVydHkiLCJ1cGRhdGVQcm9wZXJ0eVN0YXRlIiwic2l0dWFjYW8iLCJvayIsIm1lc3NhZ2UiLCJhZGRQcm9wZXJ0eSIsInRpdHVsbyIsImltZyIsImVuZGVyZWNvIiwidGlwbyIsIm5yX2Rvcm1pdG9yaW9zIiwibnJfYmFuaGVpcm9zIiwibnJfdmFnYXNfZ2FyYWdlbSIsInZhbG9yIiwiaW5zZXJ0IiwiZXhpc3QiLCJpbnNlcnRPbmUiLCJwYXJzZUludCIsInBhcnNlRmxvYXQiLCJhZGRJbnRlcmVzdCIsIm5vbWUiLCJ0ZWxlZm9uZSIsImF1eCIsImxlbmd0aCIsIml0ZW0iLCJnZXRQcm9wZXJ0aWVzV2l0aEZpbHRlciIsImZpbHRlciIsInRpcG9JbW92ZWwiLCJiYW5oZWlyb3MiLCJfYmFuaGVpcm9zIiwiJGd0ZSIsInF1YXJ0b3MiLCJfcXVhcnRvcyIsImdhcmFnZW0iLCJfZ2FyYWdlbSIsInByZWNvTWF4aW1vIiwicHJlY29NaW5pbW8iLCIkbHRlIiwibG9nZ2VkIiwiJGluIiwiZ2V0SW50ZXJlc3RzIiwiaW50ZXJlc3RzIiwicmVtb3ZlSW50ZXJlc3QiLCJyZW1vdmUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFFTyxlQUFlQSxLQUFmLENBQXFCQyxRQUFyQixFQUErQkMsUUFBL0IsRUFBeUM7QUFDOUMsUUFBTUMsVUFBVSxHQUFHQyxjQUFPRCxVQUFQLENBQWtC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dCI6Ii9ob21lL2d1c3Rhdm9tb3Nlci9jb21wdXRhY2FvLzIwLjEvd2ViL3RyYWJhbGhvL3dlYi1wcm9wZXJ0eS1yZW50YWwvYmFja2VuZC9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZHJpdmVyIH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICBjb25zdCBjb2xsZWN0aW9uID0gZHJpdmVyLmNvbGxlY3Rpb24oXCJ1c2VyXCIpO1xuICBjb25zdCBxdWVyeSA9IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH07XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUocXVlcnkpO1xuICByZXR1cm4gdXNlcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc2V0KHVzZXJuYW1lLCBuZXdQYXNzd29yZCkge1xuICBjb25zdCBjb2xsZWN0aW9uID0gZHJpdmVyLmNvbGxlY3Rpb24oXCJ1c2VyXCIpO1xuICBjb25zdCBxdWVyeSA9IHsgdXNlcm5hbWUgfTtcbiAgY29uc3QgdG9VcGRhdGUgPSB7XG4gICAgJHNldDoge1xuICAgICAgcGFzc3dvcmQ6IG5ld1Bhc3N3b3JkLFxuICAgICAgZmlyc3RfbG9naW46IGZhbHNlLFxuICAgIH0sXG4gIH07XG4gIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBjb2xsZWN0aW9uLnVwZGF0ZU9uZShxdWVyeSwgdG9VcGRhdGUpO1xuICByZXR1cm4gdXBkYXRlZDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb3BlcnRpZXMoKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkcml2ZXIuY29sbGVjdGlvbihcInByb3BlcnR5XCIpO1xuICBjb25zdCBwcm9wZXJ0aWVzID0gYXdhaXQgY29sbGVjdGlvbi5maW5kKCkudG9BcnJheSgpO1xuICByZXR1cm4gcHJvcGVydGllcztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb3BlcnR5QnlJbnNjcmljYW8obnJfaW5zY3JpY2FvKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkcml2ZXIuY29sbGVjdGlvbihcInByb3BlcnR5XCIpO1xuICBjb25zdCBwcm9wZXJ0eSA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZE9uZSh7IG5yX2luc2NyaWNhbyB9KTtcbiAgcmV0dXJuIHByb3BlcnR5O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvcGVydHlTdGF0ZShucl9pbnNjcmljYW8sIHNpdHVhY2FvKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkcml2ZXIuY29sbGVjdGlvbihcInByb3BlcnR5XCIpO1xuICBjb25zdCBxdWVyeSA9IHsgbnJfaW5zY3JpY2FvOiBucl9pbnNjcmljYW8gfTtcbiAgY29uc3QgdG9VcGRhdGUgPSB7XG4gICAgJHNldDogeyBzaXR1YWNhbyB9LFxuICB9O1xuICBjb25zdCB1cGRhdGVkID0gYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUocXVlcnksIHRvVXBkYXRlKTtcbiAgaWYgKCF1cGRhdGVkKSB7XG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBcIk7Do28gZm9pIHBvc3PDrXZlbCBhdHVhbGl6YXIgcmVnaXN0cm9cIiB9O1xuICB9XG4gIHJldHVybiB7IG9rOiB0cnVlIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRQcm9wZXJ0eShcbiAgbnJfaW5zY3JpY2FvLFxuICB0aXR1bG8sXG4gIGltZyxcbiAgZW5kZXJlY28sXG4gIHRpcG8sXG4gIG5yX2Rvcm1pdG9yaW9zLFxuICBucl9iYW5oZWlyb3MsXG4gIG5yX3ZhZ2FzX2dhcmFnZW0sXG4gIHZhbG9yXG4pIHtcbiAgY29uc3QgY29sbGVjdGlvbiA9IGRyaXZlci5jb2xsZWN0aW9uKFwicHJvcGVydHlcIik7XG4gIGxldCBpbnNlcnQgPSBudWxsO1xuICBjb25zdCBleGlzdCA9IGF3YWl0IGdldFByb3BlcnR5QnlJbnNjcmljYW8obnJfaW5zY3JpY2FvKTtcbiAgaWYgKCFleGlzdCkge1xuICAgIGluc2VydCA9IGF3YWl0IGNvbGxlY3Rpb24uaW5zZXJ0T25lKHtcbiAgICAgIG5yX2luc2NyaWNhbyxcbiAgICAgIHRpdHVsbyxcbiAgICAgIGltZyxcbiAgICAgIGVuZGVyZWNvLFxuICAgICAgdGlwbyxcbiAgICAgIG5yX2Rvcm1pdG9yaW9zOiBwYXJzZUludChucl9kb3JtaXRvcmlvcyksXG4gICAgICBucl9iYW5oZWlyb3M6IHBhcnNlSW50KG5yX2JhbmhlaXJvcyksXG4gICAgICBucl92YWdhc19nYXJhZ2VtOiBwYXJzZUludChucl92YWdhc19nYXJhZ2VtKSxcbiAgICAgIHZhbG9yOiBwYXJzZUZsb2F0KHZhbG9yKSxcbiAgICAgIHNpdHVhY2FvOiBcImRpc3Bvbml2ZWxcIixcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gaW5zZXJ0O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkSW50ZXJlc3QobnJfaW5zY3JpY2FvLCBub21lLCB0ZWxlZm9uZSkge1xuICBjb25zdCBwcm9wZXJ0eSA9IGF3YWl0IGdldFByb3BlcnR5QnlJbnNjcmljYW8obnJfaW5zY3JpY2FvKTtcbiAgaWYgKHByb3BlcnR5KSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRyaXZlci5jb2xsZWN0aW9uKFwiaW50ZXJlc3RcIik7XG4gICAgY29uc3QgYXV4ID0gYXdhaXQgY29sbGVjdGlvbi5maW5kKHsgbm9tZSwgdGVsZWZvbmUgfSkudG9BcnJheSgpO1xuICAgIGlmIChhdXgubGVuZ3RoID4gMikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBcIlZvY8OqIGF0aW5naXUgbyBuw7ptZXJvIG3DoXhpbW8gZGUgcmVxdWlzacOnw7VlcyBkZSBpbnRlcmVzc2UuXCIsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgY29sbGVjdGlvbi5pbnNlcnRPbmUoe1xuICAgICAgICBucl9pbnNjcmljYW8sXG4gICAgICAgIG5vbWUsXG4gICAgICAgIHRlbGVmb25lLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBcIkVzdGUgaW3Ds3ZlbCBuw6NvIGV4aXN0ZS5cIiB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9wZXJ0aWVzV2l0aEZpbHRlcihmaWx0ZXIpIHtcbiAgY29uc3QgY29sbGVjdGlvbiA9IGRyaXZlci5jb2xsZWN0aW9uKFwicHJvcGVydHlcIik7XG5cbiAgdmFyIHF1ZXJ5ID0ge307XG5cbiAgaWYgKGZpbHRlci50aXBvSW1vdmVsKSB7XG4gICAgcXVlcnkudGlwbyA9IGZpbHRlci50aXBvSW1vdmVsO1xuICB9XG5cbiAgaWYgKGZpbHRlci5iYW5oZWlyb3MpIHtcbiAgICBjb25zdCBfYmFuaGVpcm9zID0gcGFyc2VJbnQoZmlsdGVyLm5yX2JhbmhlaXJvcyk7XG4gICAgaWYgKF9iYW5oZWlyb3MgPj0gMykge1xuICAgICAgcXVlcnkubnJfYmFuaGVpcm9zID0geyAkZ3RlOiBfYmFuaGVpcm9zIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHF1ZXJ5Lm5yX2JhbmhlaXJvcyA9IF9iYW5oZWlyb3M7XG4gICAgfVxuICB9XG5cbiAgaWYgKGZpbHRlci5xdWFydG9zKSB7XG4gICAgY29uc3QgX3F1YXJ0b3MgPSBwYXJzZUludChmaWx0ZXIucXVhcnRvcyk7XG4gICAgaWYgKF9xdWFydG9zID49IDMpIHtcbiAgICAgIHF1ZXJ5Lm5yX2Rvcm1pdG9yaW9zID0geyAkZ3RlOiBfcXVhcnRvcyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBxdWVyeS5ucl9kb3JtaXRvcmlvcyA9IF9xdWFydG9zO1xuICAgIH1cbiAgfVxuXG4gIGlmIChmaWx0ZXIuZ2FyYWdlbSkge1xuICAgIGNvbnN0IF9nYXJhZ2VtID0gcGFyc2VJbnQoZmlsdGVyLmdhcmFnZW0pO1xuICAgIGlmIChfZ2FyYWdlbSA+PSAyKSB7XG4gICAgICBxdWVyeS5ucl92YWdhc19nYXJhZ2VtID0geyAkZ3RlOiBfZ2FyYWdlbSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBxdWVyeS5ucl92YWdhc19nYXJhZ2VtID0gX2dhcmFnZW07XG4gICAgfVxuICB9XG5cbiAgaWYgKGZpbHRlci5wcmVjb01heGltbyAmJiBmaWx0ZXIucHJlY29NaW5pbW8pIHtcbiAgICBxdWVyeS52YWxvciA9IHtcbiAgICAgICRsdGU6IHBhcnNlRmxvYXQoZmlsdGVyLnByZWNvTWF4aW1vKSxcbiAgICAgICRndGU6IHBhcnNlRmxvYXQoZmlsdGVyLnByZWNvTWluaW1vKSxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGlmIChmaWx0ZXIucHJlY29NYXhpbW8pIHtcbiAgICAgIHF1ZXJ5LnZhbG9yID0geyAkbHRlOiBwYXJzZUZsb2F0KGZpbHRlci5wcmVjb01heGltbykgfTtcbiAgICB9IGVsc2UgaWYgKGZpbHRlci5wcmVjb01pbmltbykge1xuICAgICAgcXVlcnkudmFsb3IgPSB7ICRndGU6IHBhcnNlRmxvYXQoZmlsdGVyLnByZWNvTWluaW1vKSB9O1xuICAgIH1cbiAgfVxuXG4gIGlmICghZmlsdGVyLmxvZ2dlZCkge1xuICAgIHF1ZXJ5LnNpdHVhY2FvID0geyAkaW46IFtcImRpc3Bvbml2ZWxcIiwgXCJyZXNlcnZhZG9cIl0gfTtcbiAgfVxuXG4gIGNvbnN0IHByb3BlcnRpZXMgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmQocXVlcnkpLnRvQXJyYXkoKTtcbiAgcmV0dXJuIHByb3BlcnRpZXM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnRlcmVzdHMoKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkcml2ZXIuY29sbGVjdGlvbihcImludGVyZXN0XCIpO1xuICBjb25zdCBpbnRlcmVzdHMgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmQoKS50b0FycmF5KCk7XG4gIHJldHVybiBpbnRlcmVzdHM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmVJbnRlcmVzdChucl9pbnNjcmljYW8sIG5vbWUsIHRlbGVmb25lKSB7XG4gIGNvbnN0IHByb3BlcnR5ID0gYXdhaXQgZ2V0UHJvcGVydHlCeUluc2NyaWNhbyhucl9pbnNjcmljYW8pO1xuICBpZiAocHJvcGVydHkuc2l0dWFjYW8gIT09IFwiZGlzcG9uaXZlbFwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9rOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IFwiTyBpbcOzdmVsIG7Do28gZXN0w6EgZGlzcG9uw612ZWwgcGFyYSByZXNlcnZhLlwiLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRyaXZlci5jb2xsZWN0aW9uKFwiaW50ZXJlc3RcIik7XG4gICAgY29uc3QgaW50ZXJlc3RzID0gYXdhaXQgY29sbGVjdGlvbi5yZW1vdmUoeyBucl9pbnNjcmljYW8sIG5vbWUsIHRlbGVmb25lIH0pO1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBkcml2ZXIuY29sbGVjdGlvbihcInByb3BlcnR5XCIpO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBwcm9wZXJ0aWVzLnVwZGF0ZU9uZShcbiAgICAgIHsgbnJfaW5zY3JpY2FvIH0sXG4gICAgICB7XG4gICAgICAgICRzZXQ6IHsgc2l0dWFjYW86IFwicmVzZXJ2YWRvXCIgfSxcbiAgICAgIH1cbiAgICApO1xuICAgIGlmIChpbnRlcmVzdHMgJiYgdXBkYXRlZCkge1xuICAgICAgcmV0dXJuIHsgb2s6IHRydWUgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBcIlByb2JsZW1hIGFvIHJlc29sdmVyIHNpdHVhw6fDo28gZGUgaW50ZXJlc3NlLlwiLFxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "db.js"
      ],
      "names": [
        "login",
        "username",
        "password",
        "collection",
        "driver",
        "query",
        "user",
        "findOne",
        "reset",
        "newPassword",
        "toUpdate",
        "$set",
        "first_login",
        "updated",
        "updateOne",
        "getProperties",
        "properties",
        "find",
        "toArray",
        "getPropertyByInscricao",
        "nr_inscricao",
        "property",
        "updatePropertyState",
        "situacao",
        "ok",
        "message",
        "addProperty",
        "titulo",
        "img",
        "endereco",
        "tipo",
        "nr_dormitorios",
        "nr_banheiros",
        "nr_vagas_garagem",
        "valor",
        "insert",
        "exist",
        "insertOne",
        "parseInt",
        "parseFloat",
        "addInterest",
        "nome",
        "telefone",
        "aux",
        "length",
        "item",
        "getPropertiesWithFilter",
        "filter",
        "tipoImovel",
        "banheiros",
        "_banheiros",
        "$gte",
        "quartos",
        "_quartos",
        "garagem",
        "_garagem",
        "precoMaximo",
        "precoMinimo",
        "$lte",
        "logged",
        "$in",
        "getInterests",
        "interests",
        "removeInterest",
        "remove"
      ],
      "mappings": "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",
      "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
      "sourcesContent": [
        "import { driver } from \"./index\";\n\nexport async function login(username, password) {\n  const collection = driver.collection(\"user\");\n  const query = { username, password };\n  const user = await collection.findOne(query);\n  return user;\n}\n\nexport async function reset(username, newPassword) {\n  const collection = driver.collection(\"user\");\n  const query = { username };\n  const toUpdate = {\n    $set: {\n      password: newPassword,\n      first_login: false,\n    },\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  return updated;\n}\n\nexport async function getProperties() {\n  const collection = driver.collection(\"property\");\n  const properties = await collection.find().toArray();\n  return properties;\n}\n\nexport async function getPropertyByInscricao(nr_inscricao) {\n  const collection = driver.collection(\"property\");\n  const property = await collection.findOne({ nr_inscricao });\n  return property;\n}\n\nexport async function updatePropertyState(nr_inscricao, situacao) {\n  const collection = driver.collection(\"property\");\n  const query = { nr_inscricao: nr_inscricao };\n  const toUpdate = {\n    $set: { situacao },\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  if (!updated) {\n    return { ok: false, message: \"Não foi possível atualizar registro\" };\n  }\n  return { ok: true };\n}\n\nexport async function addProperty(\n  nr_inscricao,\n  titulo,\n  img,\n  endereco,\n  tipo,\n  nr_dormitorios,\n  nr_banheiros,\n  nr_vagas_garagem,\n  valor\n) {\n  const collection = driver.collection(\"property\");\n  let insert = null;\n  const exist = await getPropertyByInscricao(nr_inscricao);\n  if (!exist) {\n    insert = await collection.insertOne({\n      nr_inscricao,\n      titulo,\n      img,\n      endereco,\n      tipo,\n      nr_dormitorios: parseInt(nr_dormitorios),\n      nr_banheiros: parseInt(nr_banheiros),\n      nr_vagas_garagem: parseInt(nr_vagas_garagem),\n      valor: parseFloat(valor),\n      situacao: \"disponivel\",\n    });\n  }\n  return insert;\n}\n\nexport async function addInterest(nr_inscricao, nome, telefone) {\n  const property = await getPropertyByInscricao(nr_inscricao);\n  if (property) {\n    const collection = driver.collection(\"interest\");\n    const aux = await collection.find({ nome, telefone }).toArray();\n    if (aux.length > 2) {\n      return {\n        ok: false,\n        message: \"Você atingiu o número máximo de requisições de interesse.\",\n      };\n    } else {\n      const item = await collection.insertOne({\n        nr_inscricao,\n        nome,\n        telefone,\n      });\n      return item;\n    }\n  } else {\n    return { ok: false, message: \"Este imóvel não existe.\" };\n  }\n}\n\nexport async function getPropertiesWithFilter(filter) {\n  const collection = driver.collection(\"property\");\n\n  var query = {};\n\n  if (filter.tipoImovel) {\n    query.tipo = filter.tipoImovel;\n  }\n\n  if (filter.banheiros) {\n    const _banheiros = parseInt(filter.nr_banheiros);\n    if (_banheiros >= 3) {\n      query.nr_banheiros = { $gte: _banheiros };\n    } else {\n      query.nr_banheiros = _banheiros;\n    }\n  }\n\n  if (filter.quartos) {\n    const _quartos = parseInt(filter.quartos);\n    if (_quartos >= 3) {\n      query.nr_dormitorios = { $gte: _quartos };\n    } else {\n      query.nr_dormitorios = _quartos;\n    }\n  }\n\n  if (filter.garagem) {\n    const _garagem = parseInt(filter.garagem);\n    if (_garagem >= 2) {\n      query.nr_vagas_garagem = { $gte: _garagem };\n    } else {\n      query.nr_vagas_garagem = _garagem;\n    }\n  }\n\n  if (filter.precoMaximo && filter.precoMinimo) {\n    query.valor = {\n      $lte: parseFloat(filter.precoMaximo),\n      $gte: parseFloat(filter.precoMinimo),\n    };\n  } else {\n    if (filter.precoMaximo) {\n      query.valor = { $lte: parseFloat(filter.precoMaximo) };\n    } else if (filter.precoMinimo) {\n      query.valor = { $gte: parseFloat(filter.precoMinimo) };\n    }\n  }\n\n  if (!filter.logged) {\n    query.situacao = { $in: [\"disponivel\", \"reservado\"] };\n  }\n\n  const properties = await collection.find(query).toArray();\n  return properties;\n}\n\nexport async function getInterests() {\n  const collection = driver.collection(\"interest\");\n  const interests = await collection.find().toArray();\n  return interests;\n}\n\nexport async function removeInterest(nr_inscricao, nome, telefone) {\n  const property = await getPropertyByInscricao(nr_inscricao);\n  if (property.situacao !== \"disponivel\") {\n    return {\n      ok: false,\n      message: \"O imóvel não está disponível para reserva.\",\n    };\n  } else {\n    const collection = driver.collection(\"interest\");\n    const interests = await collection.remove({ nr_inscricao, nome, telefone });\n    const properties = driver.collection(\"property\");\n    const updated = await properties.updateOne(\n      { nr_inscricao },\n      {\n        $set: { situacao: \"reservado\" },\n      }\n    );\n    if (interests && updated) {\n      return { ok: true };\n    } else {\n      return {\n        ok: false,\n        message: \"Problema ao resolver situação de interesse.\",\n      };\n    }\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1607792202139
  },
  "{\"sourceRoot\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend\",\"filename\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/db.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.12.10": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend",
      "filename": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/db.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/db.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/db.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
        "sourceFileName": "db.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.login = login;\nexports.reset = reset;\nexports.getProperties = getProperties;\nexports.getPropertyByInscricao = getPropertyByInscricao;\nexports.updatePropertyState = updatePropertyState;\nexports.addProperty = addProperty;\nexports.addInterest = addInterest;\nexports.getPropertiesWithFilter = getPropertiesWithFilter;\nexports.getInterests = getInterests;\nexports.removeInterest = removeInterest;\n\nvar _index = require(\"./index\");\n\nasync function login(username, password) {\n  const collection = _index.driver.collection(\"user\");\n\n  const query = {\n    username,\n    password\n  };\n  const user = await collection.findOne(query);\n  return user;\n}\n\nasync function reset(username, newPassword) {\n  const collection = _index.driver.collection(\"user\");\n\n  const query = {\n    username\n  };\n  const toUpdate = {\n    $set: {\n      password: newPassword,\n      first_login: false\n    }\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  return updated;\n}\n\nasync function getProperties() {\n  const collection = _index.driver.collection(\"property\");\n\n  const properties = await collection.find().toArray();\n  return properties;\n}\n\nasync function getPropertyByInscricao(nr_inscricao) {\n  const collection = _index.driver.collection(\"property\");\n\n  const property = await collection.findOne({\n    nr_inscricao\n  });\n  return property;\n}\n\nasync function updatePropertyState(nr_inscricao, situacao) {\n  const collection = _index.driver.collection(\"property\");\n\n  const query = {\n    nr_inscricao: nr_inscricao\n  };\n  const toUpdate = {\n    $set: {\n      situacao\n    }\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n\n  if (!updated) {\n    return {\n      ok: false,\n      message: \"Não foi possível atualizar registro\"\n    };\n  }\n\n  return {\n    ok: true\n  };\n}\n\nasync function addProperty(nr_inscricao, titulo, img, endereco, tipo, nr_dormitorios, nr_banheiros, nr_vagas_garagem, valor) {\n  const collection = _index.driver.collection(\"property\");\n\n  let insert = null;\n  const exist = await getPropertyByInscricao(nr_inscricao);\n\n  if (!exist) {\n    insert = await collection.insertOne({\n      nr_inscricao,\n      titulo,\n      img,\n      endereco,\n      tipo,\n      nr_dormitorios: parseInt(nr_dormitorios),\n      nr_banheiros: parseInt(nr_banheiros),\n      nr_vagas_garagem: parseInt(nr_vagas_garagem),\n      valor: parseFloat(valor),\n      situacao: \"disponivel\"\n    });\n  }\n\n  return insert;\n}\n\nasync function addInterest(nr_inscricao, nome, telefone) {\n  const property = await getPropertyByInscricao(nr_inscricao);\n\n  if (property) {\n    const collection = _index.driver.collection(\"interest\");\n\n    const aux = await collection.find({\n      nome,\n      telefone\n    }).toArray();\n\n    if (aux.length > 2) {\n      return {\n        ok: false,\n        message: \"Você atingiu o número máximo de requisições de interesse.\"\n      };\n    } else {\n      const item = await collection.insertOne({\n        nr_inscricao,\n        nome,\n        telefone\n      });\n      return item;\n    }\n  } else {\n    return {\n      ok: false,\n      message: \"Este imóvel não existe.\"\n    };\n  }\n}\n\nasync function getPropertiesWithFilter(filter) {\n  const collection = _index.driver.collection(\"property\");\n\n  var query = {};\n\n  if (filter.tipoImovel) {\n    query.tipo = filter.tipoImovel;\n  }\n\n  if (filter.banheiros) {\n    const _banheiros = parseInt(filter.nr_banheiros);\n\n    if (_banheiros >= 3) {\n      query.nr_banheiros = {\n        $gte: _banheiros\n      };\n    } else {\n      query.nr_banheiros = _banheiros;\n    }\n  }\n\n  if (filter.quartos) {\n    const _quartos = parseInt(filter.quartos);\n\n    if (_quartos >= 3) {\n      query.nr_dormitorios = {\n        $gte: _quartos\n      };\n    } else {\n      query.nr_dormitorios = _quartos;\n    }\n  }\n\n  if (filter.garagem) {\n    const _garagem = parseInt(filter.garagem);\n\n    if (_garagem >= 2) {\n      query.nr_vagas_garagem = {\n        $gte: _garagem\n      };\n    } else {\n      query.nr_vagas_garagem = _garagem;\n    }\n  }\n\n  if (filter.precoMaximo && filter.precoMinimo) {\n    query.valor = {\n      $lte: parseFloat(filter.precoMaximo),\n      $gte: parseFloat(filter.precoMinimo)\n    };\n  } else {\n    if (filter.precoMaximo) {\n      query.valor = {\n        $lte: parseFloat(filter.precoMaximo)\n      };\n    } else if (filter.precoMinimo) {\n      query.valor = {\n        $gte: parseFloat(filter.precoMinimo)\n      };\n    }\n  }\n\n  if (!filter.logged) {\n    query.situacao = {\n      $in: [\"disponivel\", \"reservado\"]\n    };\n  }\n\n  const properties = await collection.find(query).toArray();\n  return properties;\n}\n\nasync function getInterests() {\n  const collection = _index.driver.collection(\"interest\");\n\n  const interests = await collection.find().toArray();\n  return interests;\n}\n\nasync function removeInterest(nr_inscricao, nome, telefone) {\n  const property = await getPropertyByInscricao(nr_inscricao);\n\n  if (property.situacao !== \"disponivel\") {\n    return {\n      ok: false,\n      message: \"O imóvel não está disponível para reserva.\"\n    };\n  } else {\n    const collection = _index.driver.collection(\"interest\");\n\n    const interests = await collection.remove({\n      nr_inscricao,\n      nome,\n      telefone\n    });\n\n    const properties = _index.driver.collection(\"property\");\n\n    const updated = await properties.updateOne({\n      nr_inscricao\n    }, {\n      $set: {\n        situacao: \"reservado\"\n      }\n    });\n\n    if (interests && updated) {\n      return {\n        ok: true\n      };\n    } else {\n      return {\n        ok: false,\n        message: \"Problema ao resolver situação de interesse.\"\n      };\n    }\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiLmpzIl0sIm5hbWVzIjpbImxvZ2luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImNvbGxlY3Rpb24iLCJkcml2ZXIiLCJxdWVyeSIsInVzZXIiLCJmaW5kT25lIiwicmVzZXQiLCJuZXdQYXNzd29yZCIsInRvVXBkYXRlIiwiJHNldCIsImZpcnN0X2xvZ2luIiwidXBkYXRlZCIsInVwZGF0ZU9uZSIsImdldFByb3BlcnRpZXMiLCJwcm9wZXJ0aWVzIiwiZmluZCIsInRvQXJyYXkiLCJnZXRQcm9wZXJ0eUJ5SW5zY3JpY2FvIiwibnJfaW5zY3JpY2FvIiwicHJvcGVydHkiLCJ1cGRhdGVQcm9wZXJ0eVN0YXRlIiwic2l0dWFjYW8iLCJvayIsIm1lc3NhZ2UiLCJhZGRQcm9wZXJ0eSIsInRpdHVsbyIsImltZyIsImVuZGVyZWNvIiwidGlwbyIsIm5yX2Rvcm1pdG9yaW9zIiwibnJfYmFuaGVpcm9zIiwibnJfdmFnYXNfZ2FyYWdlbSIsInZhbG9yIiwiaW5zZXJ0IiwiZXhpc3QiLCJpbnNlcnRPbmUiLCJwYXJzZUludCIsInBhcnNlRmxvYXQiLCJhZGRJbnRlcmVzdCIsIm5vbWUiLCJ0ZWxlZm9uZSIsImF1eCIsImxlbmd0aCIsIml0ZW0iLCJnZXRQcm9wZXJ0aWVzV2l0aEZpbHRlciIsImZpbHRlciIsInRpcG9JbW92ZWwiLCJiYW5oZWlyb3MiLCJfYmFuaGVpcm9zIiwiJGd0ZSIsInF1YXJ0b3MiLCJfcXVhcnRvcyIsImdhcmFnZW0iLCJfZ2FyYWdlbSIsInByZWNvTWF4aW1vIiwicHJlY29NaW5pbW8iLCIkbHRlIiwibG9nZ2VkIiwiJGluIiwiZ2V0SW50ZXJlc3RzIiwiaW50ZXJlc3RzIiwicmVtb3ZlSW50ZXJlc3QiLCJyZW1vdmUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFFTyxlQUFlQSxLQUFmLENBQXFCQyxRQUFyQixFQUErQkMsUUFBL0IsRUFBeUM7QUFDOUMsUUFBTUMsVUFBVSxHQUFHQyxjQUFPRCxVQUFQLENBQWtC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dCI6Ii9ob21lL2d1c3Rhdm9tb3Nlci9jb21wdXRhY2FvLzIwLjEvd2ViL3RyYWJhbGhvL3dlYi1wcm9wZXJ0eS1yZW50YWwvYmFja2VuZC9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZHJpdmVyIH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICBjb25zdCBjb2xsZWN0aW9uID0gZHJpdmVyLmNvbGxlY3Rpb24oXCJ1c2VyXCIpO1xuICBjb25zdCBxdWVyeSA9IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH07XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUocXVlcnkpO1xuICByZXR1cm4gdXNlcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc2V0KHVzZXJuYW1lLCBuZXdQYXNzd29yZCkge1xuICBjb25zdCBjb2xsZWN0aW9uID0gZHJpdmVyLmNvbGxlY3Rpb24oXCJ1c2VyXCIpO1xuICBjb25zdCBxdWVyeSA9IHsgdXNlcm5hbWUgfTtcbiAgY29uc3QgdG9VcGRhdGUgPSB7XG4gICAgJHNldDoge1xuICAgICAgcGFzc3dvcmQ6IG5ld1Bhc3N3b3JkLFxuICAgICAgZmlyc3RfbG9naW46IGZhbHNlLFxuICAgIH0sXG4gIH07XG4gIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBjb2xsZWN0aW9uLnVwZGF0ZU9uZShxdWVyeSwgdG9VcGRhdGUpO1xuICByZXR1cm4gdXBkYXRlZDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb3BlcnRpZXMoKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkcml2ZXIuY29sbGVjdGlvbihcInByb3BlcnR5XCIpO1xuICBjb25zdCBwcm9wZXJ0aWVzID0gYXdhaXQgY29sbGVjdGlvbi5maW5kKCkudG9BcnJheSgpO1xuICByZXR1cm4gcHJvcGVydGllcztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb3BlcnR5QnlJbnNjcmljYW8obnJfaW5zY3JpY2FvKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkcml2ZXIuY29sbGVjdGlvbihcInByb3BlcnR5XCIpO1xuICBjb25zdCBwcm9wZXJ0eSA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZE9uZSh7IG5yX2luc2NyaWNhbyB9KTtcbiAgcmV0dXJuIHByb3BlcnR5O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvcGVydHlTdGF0ZShucl9pbnNjcmljYW8sIHNpdHVhY2FvKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkcml2ZXIuY29sbGVjdGlvbihcInByb3BlcnR5XCIpO1xuICBjb25zdCBxdWVyeSA9IHsgbnJfaW5zY3JpY2FvOiBucl9pbnNjcmljYW8gfTtcbiAgY29uc3QgdG9VcGRhdGUgPSB7XG4gICAgJHNldDogeyBzaXR1YWNhbyB9LFxuICB9O1xuICBjb25zdCB1cGRhdGVkID0gYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUocXVlcnksIHRvVXBkYXRlKTtcbiAgaWYgKCF1cGRhdGVkKSB7XG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBcIk7Do28gZm9pIHBvc3PDrXZlbCBhdHVhbGl6YXIgcmVnaXN0cm9cIiB9O1xuICB9XG4gIHJldHVybiB7IG9rOiB0cnVlIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRQcm9wZXJ0eShcbiAgbnJfaW5zY3JpY2FvLFxuICB0aXR1bG8sXG4gIGltZyxcbiAgZW5kZXJlY28sXG4gIHRpcG8sXG4gIG5yX2Rvcm1pdG9yaW9zLFxuICBucl9iYW5oZWlyb3MsXG4gIG5yX3ZhZ2FzX2dhcmFnZW0sXG4gIHZhbG9yXG4pIHtcbiAgY29uc3QgY29sbGVjdGlvbiA9IGRyaXZlci5jb2xsZWN0aW9uKFwicHJvcGVydHlcIik7XG4gIGxldCBpbnNlcnQgPSBudWxsO1xuICBjb25zdCBleGlzdCA9IGF3YWl0IGdldFByb3BlcnR5QnlJbnNjcmljYW8obnJfaW5zY3JpY2FvKTtcbiAgaWYgKCFleGlzdCkge1xuICAgIGluc2VydCA9IGF3YWl0IGNvbGxlY3Rpb24uaW5zZXJ0T25lKHtcbiAgICAgIG5yX2luc2NyaWNhbyxcbiAgICAgIHRpdHVsbyxcbiAgICAgIGltZyxcbiAgICAgIGVuZGVyZWNvLFxuICAgICAgdGlwbyxcbiAgICAgIG5yX2Rvcm1pdG9yaW9zOiBwYXJzZUludChucl9kb3JtaXRvcmlvcyksXG4gICAgICBucl9iYW5oZWlyb3M6IHBhcnNlSW50KG5yX2JhbmhlaXJvcyksXG4gICAgICBucl92YWdhc19nYXJhZ2VtOiBwYXJzZUludChucl92YWdhc19nYXJhZ2VtKSxcbiAgICAgIHZhbG9yOiBwYXJzZUZsb2F0KHZhbG9yKSxcbiAgICAgIHNpdHVhY2FvOiBcImRpc3Bvbml2ZWxcIixcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gaW5zZXJ0O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkSW50ZXJlc3QobnJfaW5zY3JpY2FvLCBub21lLCB0ZWxlZm9uZSkge1xuICBjb25zdCBwcm9wZXJ0eSA9IGF3YWl0IGdldFByb3BlcnR5QnlJbnNjcmljYW8obnJfaW5zY3JpY2FvKTtcbiAgaWYgKHByb3BlcnR5KSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRyaXZlci5jb2xsZWN0aW9uKFwiaW50ZXJlc3RcIik7XG4gICAgY29uc3QgYXV4ID0gYXdhaXQgY29sbGVjdGlvbi5maW5kKHsgbm9tZSwgdGVsZWZvbmUgfSkudG9BcnJheSgpO1xuICAgIGlmIChhdXgubGVuZ3RoID4gMikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBcIlZvY8OqIGF0aW5naXUgbyBuw7ptZXJvIG3DoXhpbW8gZGUgcmVxdWlzacOnw7VlcyBkZSBpbnRlcmVzc2UuXCIsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgY29sbGVjdGlvbi5pbnNlcnRPbmUoe1xuICAgICAgICBucl9pbnNjcmljYW8sXG4gICAgICAgIG5vbWUsXG4gICAgICAgIHRlbGVmb25lLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBtZXNzYWdlOiBcIkVzdGUgaW3Ds3ZlbCBuw6NvIGV4aXN0ZS5cIiB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9wZXJ0aWVzV2l0aEZpbHRlcihmaWx0ZXIpIHtcbiAgY29uc3QgY29sbGVjdGlvbiA9IGRyaXZlci5jb2xsZWN0aW9uKFwicHJvcGVydHlcIik7XG5cbiAgdmFyIHF1ZXJ5ID0ge307XG5cbiAgaWYgKGZpbHRlci50aXBvSW1vdmVsKSB7XG4gICAgcXVlcnkudGlwbyA9IGZpbHRlci50aXBvSW1vdmVsO1xuICB9XG5cbiAgaWYgKGZpbHRlci5iYW5oZWlyb3MpIHtcbiAgICBjb25zdCBfYmFuaGVpcm9zID0gcGFyc2VJbnQoZmlsdGVyLm5yX2JhbmhlaXJvcyk7XG4gICAgaWYgKF9iYW5oZWlyb3MgPj0gMykge1xuICAgICAgcXVlcnkubnJfYmFuaGVpcm9zID0geyAkZ3RlOiBfYmFuaGVpcm9zIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHF1ZXJ5Lm5yX2JhbmhlaXJvcyA9IF9iYW5oZWlyb3M7XG4gICAgfVxuICB9XG5cbiAgaWYgKGZpbHRlci5xdWFydG9zKSB7XG4gICAgY29uc3QgX3F1YXJ0b3MgPSBwYXJzZUludChmaWx0ZXIucXVhcnRvcyk7XG4gICAgaWYgKF9xdWFydG9zID49IDMpIHtcbiAgICAgIHF1ZXJ5Lm5yX2Rvcm1pdG9yaW9zID0geyAkZ3RlOiBfcXVhcnRvcyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBxdWVyeS5ucl9kb3JtaXRvcmlvcyA9IF9xdWFydG9zO1xuICAgIH1cbiAgfVxuXG4gIGlmIChmaWx0ZXIuZ2FyYWdlbSkge1xuICAgIGNvbnN0IF9nYXJhZ2VtID0gcGFyc2VJbnQoZmlsdGVyLmdhcmFnZW0pO1xuICAgIGlmIChfZ2FyYWdlbSA+PSAyKSB7XG4gICAgICBxdWVyeS5ucl92YWdhc19nYXJhZ2VtID0geyAkZ3RlOiBfZ2FyYWdlbSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBxdWVyeS5ucl92YWdhc19nYXJhZ2VtID0gX2dhcmFnZW07XG4gICAgfVxuICB9XG5cbiAgaWYgKGZpbHRlci5wcmVjb01heGltbyAmJiBmaWx0ZXIucHJlY29NaW5pbW8pIHtcbiAgICBxdWVyeS52YWxvciA9IHtcbiAgICAgICRsdGU6IHBhcnNlRmxvYXQoZmlsdGVyLnByZWNvTWF4aW1vKSxcbiAgICAgICRndGU6IHBhcnNlRmxvYXQoZmlsdGVyLnByZWNvTWluaW1vKSxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGlmIChmaWx0ZXIucHJlY29NYXhpbW8pIHtcbiAgICAgIHF1ZXJ5LnZhbG9yID0geyAkbHRlOiBwYXJzZUZsb2F0KGZpbHRlci5wcmVjb01heGltbykgfTtcbiAgICB9IGVsc2UgaWYgKGZpbHRlci5wcmVjb01pbmltbykge1xuICAgICAgcXVlcnkudmFsb3IgPSB7ICRndGU6IHBhcnNlRmxvYXQoZmlsdGVyLnByZWNvTWluaW1vKSB9O1xuICAgIH1cbiAgfVxuXG4gIGlmICghZmlsdGVyLmxvZ2dlZCkge1xuICAgIHF1ZXJ5LnNpdHVhY2FvID0geyAkaW46IFtcImRpc3Bvbml2ZWxcIiwgXCJyZXNlcnZhZG9cIl0gfTtcbiAgfVxuXG4gIGNvbnN0IHByb3BlcnRpZXMgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmQocXVlcnkpLnRvQXJyYXkoKTtcbiAgcmV0dXJuIHByb3BlcnRpZXM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnRlcmVzdHMoKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkcml2ZXIuY29sbGVjdGlvbihcImludGVyZXN0XCIpO1xuICBjb25zdCBpbnRlcmVzdHMgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmQoKS50b0FycmF5KCk7XG4gIHJldHVybiBpbnRlcmVzdHM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmVJbnRlcmVzdChucl9pbnNjcmljYW8sIG5vbWUsIHRlbGVmb25lKSB7XG4gIGNvbnN0IHByb3BlcnR5ID0gYXdhaXQgZ2V0UHJvcGVydHlCeUluc2NyaWNhbyhucl9pbnNjcmljYW8pO1xuICBpZiAocHJvcGVydHkuc2l0dWFjYW8gIT09IFwiZGlzcG9uaXZlbFwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9rOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IFwiTyBpbcOzdmVsIG7Do28gZXN0w6EgZGlzcG9uw612ZWwgcGFyYSByZXNlcnZhLlwiLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRyaXZlci5jb2xsZWN0aW9uKFwiaW50ZXJlc3RcIik7XG4gICAgY29uc3QgaW50ZXJlc3RzID0gYXdhaXQgY29sbGVjdGlvbi5yZW1vdmUoeyBucl9pbnNjcmljYW8sIG5vbWUsIHRlbGVmb25lIH0pO1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBkcml2ZXIuY29sbGVjdGlvbihcInByb3BlcnR5XCIpO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBwcm9wZXJ0aWVzLnVwZGF0ZU9uZShcbiAgICAgIHsgbnJfaW5zY3JpY2FvIH0sXG4gICAgICB7XG4gICAgICAgICRzZXQ6IHsgc2l0dWFjYW86IFwicmVzZXJ2YWRvXCIgfSxcbiAgICAgIH1cbiAgICApO1xuICAgIGlmIChpbnRlcmVzdHMgJiYgdXBkYXRlZCkge1xuICAgICAgcmV0dXJuIHsgb2s6IHRydWUgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBcIlByb2JsZW1hIGFvIHJlc29sdmVyIHNpdHVhw6fDo28gZGUgaW50ZXJlc3NlLlwiLFxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "db.js"
      ],
      "names": [
        "login",
        "username",
        "password",
        "collection",
        "driver",
        "query",
        "user",
        "findOne",
        "reset",
        "newPassword",
        "toUpdate",
        "$set",
        "first_login",
        "updated",
        "updateOne",
        "getProperties",
        "properties",
        "find",
        "toArray",
        "getPropertyByInscricao",
        "nr_inscricao",
        "property",
        "updatePropertyState",
        "situacao",
        "ok",
        "message",
        "addProperty",
        "titulo",
        "img",
        "endereco",
        "tipo",
        "nr_dormitorios",
        "nr_banheiros",
        "nr_vagas_garagem",
        "valor",
        "insert",
        "exist",
        "insertOne",
        "parseInt",
        "parseFloat",
        "addInterest",
        "nome",
        "telefone",
        "aux",
        "length",
        "item",
        "getPropertiesWithFilter",
        "filter",
        "tipoImovel",
        "banheiros",
        "_banheiros",
        "$gte",
        "quartos",
        "_quartos",
        "garagem",
        "_garagem",
        "precoMaximo",
        "precoMinimo",
        "$lte",
        "logged",
        "$in",
        "getInterests",
        "interests",
        "removeInterest",
        "remove"
      ],
      "mappings": "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",
      "sourceRoot": "/home/gustavomoser/computacao/20.1/web/trabalho/web-property-rental/backend/src/",
      "sourcesContent": [
        "import { driver } from \"./index\";\n\nexport async function login(username, password) {\n  const collection = driver.collection(\"user\");\n  const query = { username, password };\n  const user = await collection.findOne(query);\n  return user;\n}\n\nexport async function reset(username, newPassword) {\n  const collection = driver.collection(\"user\");\n  const query = { username };\n  const toUpdate = {\n    $set: {\n      password: newPassword,\n      first_login: false,\n    },\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  return updated;\n}\n\nexport async function getProperties() {\n  const collection = driver.collection(\"property\");\n  const properties = await collection.find().toArray();\n  return properties;\n}\n\nexport async function getPropertyByInscricao(nr_inscricao) {\n  const collection = driver.collection(\"property\");\n  const property = await collection.findOne({ nr_inscricao });\n  return property;\n}\n\nexport async function updatePropertyState(nr_inscricao, situacao) {\n  const collection = driver.collection(\"property\");\n  const query = { nr_inscricao: nr_inscricao };\n  const toUpdate = {\n    $set: { situacao },\n  };\n  const updated = await collection.updateOne(query, toUpdate);\n  if (!updated) {\n    return { ok: false, message: \"Não foi possível atualizar registro\" };\n  }\n  return { ok: true };\n}\n\nexport async function addProperty(\n  nr_inscricao,\n  titulo,\n  img,\n  endereco,\n  tipo,\n  nr_dormitorios,\n  nr_banheiros,\n  nr_vagas_garagem,\n  valor\n) {\n  const collection = driver.collection(\"property\");\n  let insert = null;\n  const exist = await getPropertyByInscricao(nr_inscricao);\n  if (!exist) {\n    insert = await collection.insertOne({\n      nr_inscricao,\n      titulo,\n      img,\n      endereco,\n      tipo,\n      nr_dormitorios: parseInt(nr_dormitorios),\n      nr_banheiros: parseInt(nr_banheiros),\n      nr_vagas_garagem: parseInt(nr_vagas_garagem),\n      valor: parseFloat(valor),\n      situacao: \"disponivel\",\n    });\n  }\n  return insert;\n}\n\nexport async function addInterest(nr_inscricao, nome, telefone) {\n  const property = await getPropertyByInscricao(nr_inscricao);\n  if (property) {\n    const collection = driver.collection(\"interest\");\n    const aux = await collection.find({ nome, telefone }).toArray();\n    if (aux.length > 2) {\n      return {\n        ok: false,\n        message: \"Você atingiu o número máximo de requisições de interesse.\",\n      };\n    } else {\n      const item = await collection.insertOne({\n        nr_inscricao,\n        nome,\n        telefone,\n      });\n      return item;\n    }\n  } else {\n    return { ok: false, message: \"Este imóvel não existe.\" };\n  }\n}\n\nexport async function getPropertiesWithFilter(filter) {\n  const collection = driver.collection(\"property\");\n\n  var query = {};\n\n  if (filter.tipoImovel) {\n    query.tipo = filter.tipoImovel;\n  }\n\n  if (filter.banheiros) {\n    const _banheiros = parseInt(filter.nr_banheiros);\n    if (_banheiros >= 3) {\n      query.nr_banheiros = { $gte: _banheiros };\n    } else {\n      query.nr_banheiros = _banheiros;\n    }\n  }\n\n  if (filter.quartos) {\n    const _quartos = parseInt(filter.quartos);\n    if (_quartos >= 3) {\n      query.nr_dormitorios = { $gte: _quartos };\n    } else {\n      query.nr_dormitorios = _quartos;\n    }\n  }\n\n  if (filter.garagem) {\n    const _garagem = parseInt(filter.garagem);\n    if (_garagem >= 2) {\n      query.nr_vagas_garagem = { $gte: _garagem };\n    } else {\n      query.nr_vagas_garagem = _garagem;\n    }\n  }\n\n  if (filter.precoMaximo && filter.precoMinimo) {\n    query.valor = {\n      $lte: parseFloat(filter.precoMaximo),\n      $gte: parseFloat(filter.precoMinimo),\n    };\n  } else {\n    if (filter.precoMaximo) {\n      query.valor = { $lte: parseFloat(filter.precoMaximo) };\n    } else if (filter.precoMinimo) {\n      query.valor = { $gte: parseFloat(filter.precoMinimo) };\n    }\n  }\n\n  if (!filter.logged) {\n    query.situacao = { $in: [\"disponivel\", \"reservado\"] };\n  }\n\n  const properties = await collection.find(query).toArray();\n  return properties;\n}\n\nexport async function getInterests() {\n  const collection = driver.collection(\"interest\");\n  const interests = await collection.find().toArray();\n  return interests;\n}\n\nexport async function removeInterest(nr_inscricao, nome, telefone) {\n  const property = await getPropertyByInscricao(nr_inscricao);\n  if (property.situacao !== \"disponivel\") {\n    return {\n      ok: false,\n      message: \"O imóvel não está disponível para reserva.\",\n    };\n  } else {\n    const collection = driver.collection(\"interest\");\n    const interests = await collection.remove({ nr_inscricao, nome, telefone });\n    const properties = driver.collection(\"property\");\n    const updated = await properties.updateOne(\n      { nr_inscricao },\n      {\n        $set: { situacao: \"reservado\" },\n      }\n    );\n    if (interests && updated) {\n      return { ok: true };\n    } else {\n      return {\n        ok: false,\n        message: \"Problema ao resolver situação de interesse.\",\n      };\n    }\n  }\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1607792202139
  }
}